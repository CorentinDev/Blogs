---
ID: 474
post_title: Rest with Scala and Vert.x
author: souertani
post_date: 2013-02-18 09:30:00
post_excerpt: '<p>A <a href="/index.php?post/2013/02/11/fun-with-scala-and-vert-x" hreflang="en">previous post</a>  introduced some features of using Scala with <a href="http://vertx.io/">Vert.x</a>.  This post covers how to publish Rest web services in an elegant and simple fashion.</p> <p>As in the previous post, Examples in Java and Scala are presented, source code been hosted on GitHub as part of lang-scala <a href="https://github.com/ouertani/vert.x/tree/master/vertx-lang/vertx-lang-scala">https://github.com/ouertani/vert.x/tree/master/vertx-lang/vertx-lang-scala</a></p>'
layout: post
permalink: http://blog.zenika-offres.com/?p=474
published: true
slide_template:
  - ""
---
<p>A <a href="/index.php?post/2013/02/11/fun-with-scala-and-vert-x" hreflang="en">previous post</a>  introduced some features of using Scala with <a href="http://vertx.io/">Vert.x</a>.  This post covers how to publish Rest web services in an elegant and simple fashion.</p> <p>As in the previous post, Examples in Java and Scala are presented, source code been hosted on GitHub as part of lang-scala <a href="https://github.com/ouertani/vert.x/tree/master/vertx-lang/vertx-lang-scala">https://github.com/ouertani/vert.x/tree/master/vertx-lang/vertx-lang-scala</a></p>
<!--more-->
<h3>I- Resticle</h3> <p><a href="https://github.com/ouertani/vert.x/blob/master/vertx-lang/vertx-lang-scala/src/main/scala/org/vertx/scala/deploy/Resticle.scala">Resticle</a> is a unit  of deployment dedicated to Rest. It  provides a new method (“handles”) which  can be used by Vert.x to start Rest services. “handles” returns a sequence of rest handlers&nbsp;:</p> <ul> <li>RestHandler&nbsp;: Action =&gt; Response</li> <li>Action&nbsp;: <ul> <li>GET(pattern&nbsp;: String)</li> <li>POST (pattern&nbsp;: String)</li> <li>PUT (pattern&nbsp;: String)</li> <li>DELETE(pattern&nbsp;: String)</li> <li>HEAD (pattern&nbsp;: String)</li> <li>ALL(pattern&nbsp;: String)</li> </ul></li> <li>Response&nbsp;: HttpServerRequest =&gt; Any <ul> <li>OK, Unauthorized,....</li> </ul></li> </ul> <p>In this tutorial we will be working with the SampleResticle class, for both scala and java.</p> <h3>II - Hello World</h3> <p>Vert.x provides a powerful routing and <a href="http://vertx.io/core_manual_java.html#routing-http-requests-with-pattern-matching" hreflang="en">route matching</a> mechanism, which simplifies the  routing of HTTP requests to different handlers based on pattern matching on the request path.</p> <p>In Hello World snippet, let us publish  a static GET service&nbsp;:</p> <ul> <li>GET&nbsp;:      /hello     →  code&nbsp;: 200 , body&nbsp;: world</li> </ul> <h5>Scala</h5> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">class</span> SampleResticle <span style="color: #7F0055; font-weight: bold;">extends</span> Resticle <span style="color: #000000;">&#123;</span>   override def handles =          <span style="color: #000000;">&#123;</span> GET<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/hello&quot;</span><span style="color: #000000;">&#41;</span>      :<span style="color: #000000;">&gt;</span>  OK<span style="color: #000000;">&#40;</span> _ =<span style="color: #000000;">&gt;</span> <span style="color: #888888;">&quot;world &quot;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <h5>Java</h5> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">class</span> SampleResticle <span style="color: #7F0055; font-weight: bold;">extends</span> Verticle <span style="color: #000000;">&#123;</span> &nbsp;     <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> start<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>         HttpServer server = vertx.<span style="color: #000000;">createHttpServer</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;         RouteMatcher routeMatcher = <span style="color: #7F0055; font-weight: bold;">new</span> RouteMatcher<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;         routeMatcher.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/hello&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Handler<span style="color: #000000;">&lt;</span>HttpServerRequest<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>             <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> handle<span style="color: #000000;">&#40;</span>HttpServerRequest req<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">statusCode</span> =<span style="color: #cc66cc;">200</span>;                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">end</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;world&quot;</span><span style="color: #000000;">&#41;</span>;             <span style="color: #000000;">&#125;</span>         <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>;         server.<span style="color: #000000;">requestHandler</span><span style="color: #000000;">&#40;</span>routeMatcher<span style="color: #000000;">&#41;</span>.<span style="color: #000000;">listen</span><span style="color: #000000;">&#40;</span><span style="color: #cc66cc;">8080</span>, <span style="color: #888888;">&quot;localhost&quot;</span><span style="color: #000000;">&#41;</span>;     <span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <h3>III- Chaining Handlers</h3> <p>Using Resticle we can chain handlers quit easily. The following snippets create static GET and DELETE services&nbsp;:</p> <ul> <li>GET&nbsp;:   /hello     →  code&nbsp;: 200 , body&nbsp;: world</li> <li>DELETE&nbsp;:   /posts    →  code&nbsp;: 401 , body&nbsp;: Not allowed user</li> </ul> <h5>Scala</h5> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">class</span> SampleResticle <span style="color: #7F0055; font-weight: bold;">extends</span> Resticle <span style="color: #000000;">&#123;</span>   override def handles =          <span style="color: #000000;">&#123;</span> GET<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/hello&quot;</span><span style="color: #000000;">&#41;</span>      :<span style="color: #000000;">&gt;</span>  OK<span style="color: #000000;">&#40;</span> _ =<span style="color: #000000;">&gt;</span> <span style="color: #888888;">&quot;world &quot;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#125;</span> ++          <span style="color: #000000;">&#123;</span> DELETE<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/posts&quot;</span><span style="color: #000000;">&#41;</span>   :<span style="color: #000000;">&gt;</span>  Unauthorized <span style="color: #000000;">&#123;</span>_ =<span style="color: #000000;">&gt;</span> <span style="color: #888888;">&quot;Not allowed user&quot;</span> <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <h5>java</h5> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">class</span> SampleResticle <span style="color: #7F0055; font-weight: bold;">extends</span> Verticle <span style="color: #000000;">&#123;</span> &nbsp;     <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> start<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>         HttpServer server = vertx.<span style="color: #000000;">createHttpServer</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;         RouteMatcher routeMatcher = <span style="color: #7F0055; font-weight: bold;">new</span> RouteMatcher<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;         routeMatcher.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/hello&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Handler<span style="color: #000000;">&lt;</span>HttpServerRequest<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>             <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> handle<span style="color: #000000;">&#40;<
/span>HttpServerRequest req<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">statusCode</span> =<span style="color: #cc66cc;">200</span>;                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">end</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;world&quot;</span><span style="color: #000000;">&#41;</span>;             <span style="color: #000000;">&#125;</span>         <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>;          routeMatcher.<span style="color: #000000;">delete</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/posts&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Handler<span style="color: #000000;">&lt;</span>HttpServerRequest<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>             <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> handle<span style="color: #000000;">&#40;</span>HttpServerRequest req<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">statusCode</span> =<span style="color: #cc66cc;">401</span>;                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">end</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Not allowed user&quot;</span><span style="color: #000000;">&#41;</span>;             <span style="color: #000000;">&#125;</span>         <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>;         server.<span style="color: #000000;">requestHandler</span><span style="color: #000000;">&#40;</span>routeMatcher<span style="color: #000000;">&#41;</span>.<span style="color: #000000;">listen</span><span style="color: #000000;">&#40;</span><span style="color: #cc66cc;">8080</span>, <span style="color: #888888;">&quot;localhost&quot;</span><span style="color: #000000;">&#41;</span>;     <span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <h3>IV - Value path</h3> <p>Vert.x <a href="http://vertx.io/core_manual_java.html#routing-http-requests-with-pattern-matching" hreflang="en">pattern matching</a> lets you extract values from the path and use them as parameters in the request.</p> <ul> <li>GET&nbsp;:   /hello             →  code&nbsp;: 200 , body&nbsp;: world</li> <li>DELETE&nbsp;:   /posts            →  code&nbsp;: 401 , body&nbsp;: Not allowed user</li> <li>POST&nbsp;:	   /:blogname	 →  code&nbsp;: 200 , body&nbsp;: post {blogname} received&nbsp;!</li> </ul> <p></p> <h5>Scala&nbsp;: ( Using <a href="http://docs.scala-lang.org/overviews/core/string-interpolation.html" hreflang="en">String interpolation</a>)</h5> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">class</span> SampleResticle <span style="color: #7F0055; font-weight: bold;">extends</span> Resticle <span style="color: #000000;">&#123;</span>   override def handles =          <span style="color: #000000;">&#123;</span> GET<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/hello&quot;</span><span style="color: #000000;">&#41;</span>      :<span style="color: #000000;">&gt;</span>  OK<span style="color: #000000;">&#40;</span> _ =<span style="color: #000000;">&gt;</span> <span style="color: #888888;">&quot;world &quot;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#125;</span> ++          <span style="color: #000000;">&#123;</span> DELETE<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/posts&quot;</span><span style="color: #000000;">&#41;</span>   :<span style="color: #000000;">&gt;</span>  Unauthorized <span style="color: #000000;">&#123;</span>_ =<span style="color: #000000;">&gt;</span> <span style="color: #888888;">&quot;Not allowed user&quot;</span> <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#125;</span> ++          <span style="color: #000000;">&#123;</span> POST<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/:blogname&quot;</span><span style="color: #000000;">&#41;</span> :<span style="color: #000000;">&gt;</span>  OK <span style="color: #000000;">&#123;</span>req  =<span style="color: #000000;">&gt;</span> val param = req.<span style="color: #000000;">params</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;blogname&quot;</span><span style="color: #000000;">&#41;</span> ; s<span style="color: #888888;">&quot;post $param received !&quot;</span> <span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <h5>Java</h5> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">class</span> SampleResticle <span style="color: #7F0055; font-weight: bold;">extends</span> Verticle <span style="color: #000000;">&#123;</span> &nbsp;     <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> start<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>         HttpServer server = vertx.<span style="color: #000000;">createHttpServer</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;         RouteMatcher routeMatcher = <span style="color: #7F0055; font-weight: bold;">new</span> RouteMatcher<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;         routeMatcher.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/hello&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Handler<span style="color: #000000;">&lt;</span>HttpServerRequest<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>             <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> handle<span style="color: #000000;">&#40;</span>HttpServerRequest req<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">statusCode</span> =<span style="color: #cc66cc;">200</span>;                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">end</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;world&quot;</span><span style="color: #000000;">&#41;</span>;             <span style="color: #000000;">&#125;</span>         <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>;          routeMatcher.<span style="color: #000000;">delete</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/posts&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Handler<span style="color: #000000;">&lt;</span>HttpServerRequest<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>             <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> handle<span style="color: #0
00000;">&#40;</span>HttpServerRequest req<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">statusCode</span> =<span style="color: #cc66cc;">401</span>;                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">end</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Not allowed user&quot;</span><span style="color: #000000;">&#41;</span>;             <span style="color: #000000;">&#125;</span>         <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>; &nbsp;          routeMatcher.<span style="color: #000000;">post</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/:blogname&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Handler<span style="color: #000000;">&lt;</span>HttpServerRequest<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>             <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> handle<span style="color: #000000;">&#40;</span>HttpServerRequest req<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">statusCode</span> =<span style="color: #cc66cc;">200</span>;                 <span style="color: #000000;">String</span> blogName = req.<span style="color: #000000;">params</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;blogname&quot;</span><span style="color: #000000;">&#41;</span>;                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">end</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;post &quot;</span>+blogName+ <span style="color: #888888;">&quot; received !&quot;</span><span style="color: #000000;">&#41;</span>;             <span style="color: #000000;">&#125;</span>         <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>; &nbsp;         server.<span style="color: #000000;">requestHandler</span><span style="color: #000000;">&#40;</span>routeMatcher<span style="color: #000000;">&#41;</span>.<span style="color: #000000;">listen</span><span style="color: #000000;">&#40;</span><span style="color: #cc66cc;">8080</span>, <span style="color: #888888;">&quot;localhost&quot;</span><span style="color: #000000;">&#41;</span>;     <span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <h3>V- Json</h3> <p>Let’s assume we have a Blog class with two String fields title and content&nbsp;:</p> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055;font-weight: bold;">case</span> <span style="color: #7F0055; font-weight: bold;">class</span> Blog <span style="color: #000000;">&#40;</span>title :<span style="color: #000000;">String</span> , content : <span style="color: #000000;">String</span><span style="color: #000000;">&#41;</span></pre> <p>The java equivalent has been relocated to the end of the document due to its verbosity ;).</p> <p>Publishing an object using Resticle  is simple and transparent due to implicit convertor&nbsp;: T =&gt; Buffer.</p> <h5>Scala ( Type Class)</h5> <pre class="java code java" style="font-family:inherit">object Blog <span style="color: #000000;">&#123;</span>   implicit def toBuffer<span style="color: #000000;">&#40;</span>blog : Blog<span style="color: #000000;">&#41;</span>:Buffer = JsonObject.<span style="color: #000000;">withString</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;title&quot;</span> -<span style="color: #000000;">&gt;</span> blog.<span style="color: #000000;">title</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">withString</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;content&quot;</span> -<span style="color: #000000;">&gt;</span> blog.<span style="color: #000000;">content</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#125;</span></pre> <h5>Java ( with explicit convertor )</h5> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">class</span> Convertor <span style="color: #000000;">&#123;</span>     <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">static</span>  JsonObject toJson<span style="color: #000000;">&#40;</span>Blog blog<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>        <span style="color: #7F0055; font-weight: bold;">return</span> <span style="color: #7F0055; font-weight: bold;">new</span> JsonObject<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">putString</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;title&quot;</span>, blog.<span style="color: #000000;">getTitle</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">putString</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;content&quot;</span>, blog.<span style="color: #000000;">getContent</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;     <span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <ul> <li>GET&nbsp;:    /hello            →  code&nbsp;: 200 , body&nbsp;: world</li> <li>DELETE&nbsp;:    /posts           →  code&nbsp;: 401 , body&nbsp;: Not allowed user</li> <li>POST&nbsp;:	   /:blogname	→  code&nbsp;: 200 , body&nbsp;: post {blogname} received&nbsp;!</li> <li>GET&nbsp;:	   /:id 		→  code&nbsp;: 200 , body&nbsp;: {"title":"rest","content":"scala &amp; vertx"}</li> </ul> <h5>Scala</h5> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">class</span> SampleResticle <span style="color: #7F0055; font-weight: bold;">extends</span> Resticle <span style="color: #000000;">&#123;</span>   override def handles =          <span style="color: #000000;">&#123;</span> GET<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/hello&quot;</span><span style="color: #000000;">&#41;</span>      :<span style="color: #000000;">&gt;</span>  OK<span style="color: #000000;">&#40;</span> _ =<span style="color: #000000;">&gt;</span> <span style="color: #888888;">&quot;world &quot;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#125;</span> ++          <span style="color: #000000;">&#123;</span> DELETE<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/posts&quot;</span><span style="color: #000000;">&#41;</span>   :<span style="color: #000000;">&gt;</span>  Unauthorized <span style="color: #000000;">&#123;</span>_ =<span style="color: #000000;">&gt;</span> <span style="color: #888888;">&quot;Not allowed user&quot;</span> <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#125;</span> ++          <span style="color: #000000;">&#123;</span> POST<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/:blogname&quot;</span><span style="color: #000000;">&#41;</span> :<span style="color: #000000;">&gt;</span>  OK <span style="color: #000000;">&#123;</span>req  =<span style="color: #000000;">&gt;</span> val param = req.<span style="color: #000000;">params</span><span style="color: #000000;">&
#40;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;blogname&quot;</span><span style="color: #000000;">&#41;</span> ; s<span style="color: #888888;">&quot;post $param received !&quot;</span> <span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span> ++          <span style="color: #000000;">&#123;</span> GET<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/:id&quot;</span><span style="color: #000000;">&#41;</span>        :<span style="color: #000000;">&gt;</span>  OK <span style="color: #000000;">&#40;</span> _ =<span style="color: #000000;">&gt;</span> Blog<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;rest&quot;</span>,<span style="color: #888888;">&quot;scala &amp; vertx&quot;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <h5>Java</h5> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">class</span> SampleResticle <span style="color: #7F0055; font-weight: bold;">extends</span> Verticle <span style="color: #000000;">&#123;</span> &nbsp;     <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> start<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>         HttpServer server = vertx.<span style="color: #000000;">createHttpServer</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;         RouteMatcher routeMatcher = <span style="color: #7F0055; font-weight: bold;">new</span> RouteMatcher<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;         routeMatcher.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/hello&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Handler<span style="color: #000000;">&lt;</span>HttpServerRequest<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>             <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> handle<span style="color: #000000;">&#40;</span>HttpServerRequest req<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">statusCode</span> =<span style="color: #cc66cc;">200</span>;                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">end</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;world&quot;</span><span style="color: #000000;">&#41;</span>;             <span style="color: #000000;">&#125;</span>         <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>;          routeMatcher.<span style="color: #000000;">delete</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/posts&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Handler<span style="color: #000000;">&lt;</span>HttpServerRequest<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>             <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> handle<span style="color: #000000;">&#40;</span>HttpServerRequest req<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">statusCode</span> =<span style="color: #cc66cc;">401</span>;                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">end</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Not allowed user&quot;</span><span style="color: #000000;">&#41;</span>;             <span style="color: #000000;">&#125;</span>         <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>; &nbsp;          routeMatcher.<span style="color: #000000;">post</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/:blogname&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Handler<span style="color: #000000;">&lt;</span>HttpServerRequest<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>             <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> handle<span style="color: #000000;">&#40;</span>HttpServerRequest req<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">statusCode</span> =<span style="color: #cc66cc;">200</span>;                 <span style="color: #000000;">String</span> blogName = req.<span style="color: #000000;">params</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;blogname&quot;</span><span style="color: #000000;">&#41;</span>;                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">end</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;post &quot;</span>+blogName+ <span style="color: #888888;">&quot; received !&quot;</span><span style="color: #000000;">&#41;</span>;             <span style="color: #000000;">&#125;</span>         <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>; &nbsp;         routeMatcher.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;/:id&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Handler<span style="color: #000000;">&lt;</span>HttpServerRequest<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>             <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> handle<span style="color: #000000;">&#40;</span>HttpServerRequest req<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">statusCode</span> =<span style="color: #cc66cc;">200</span>;                 Blog blog =  <span style="color: #7F0055; font-weight: bold;">new</span> Blog<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;rest&quot;</span>,<span style="color: #888888;">&quot;scala &amp; vertx&quot;</span><span style="color: #000000;">&#41;</span>;                 JsonObject obj = Convertor.<span style="color: #000000;">toJson</span><span style="color: #000000;">&#40;</span>blog<span style="color: #000000;">&#41;</span>;                 req.<span style="color: #000000;">response</span>.<span style="color: #000000;">end</span><span style="color: #000000;">&#40;</span>obj.<span style="color: #000000;">encode</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;             <span style="color: #000000;">&#125;</s
pan>         <span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>; &nbsp;         server.<span style="color: #000000;">requestHandler</span><span style="color: #000000;">&#40;</span>routeMatcher<span style="color: #000000;">&#41;</span>.<span style="color: #000000;">listen</span><span style="color: #000000;">&#40;</span><span style="color: #cc66cc;">8080</span>, <span style="color: #888888;">&quot;localhost&quot;</span><span style="color: #000000;">&#41;</span>;     <span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <p>Java Blog</p> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">class</span> Blog <span style="color: #000000;">&#123;</span> &nbsp;     <span style="color: #7F0055; font-weight: bold;">private</span> <span style="color: #7F0055; font-weight: bold;">final</span>  <span style="color: #000000;">String</span> title;     <span style="color: #7F0055; font-weight: bold;">private</span> <span style="color: #7F0055; font-weight: bold;">final</span> <span style="color: #000000;">String</span> content; &nbsp;     <span style="color: #7F0055; font-weight: bold;">public</span> Blog<span style="color: #000000;">&#40;</span><span style="color: #000000;">String</span> title, <span style="color: #000000;">String</span> content<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>         <span style="color: #7F0055; font-weight: bold;">this</span>.<span style="color: #000000;">title</span> = title;         <span style="color: #7F0055; font-weight: bold;">this</span>.<span style="color: #000000;">content</span> = content;     <span style="color: #000000;">&#125;</span> &nbsp;     <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #000000;">String</span> getTitle<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>         <span style="color: #7F0055; font-weight: bold;">return</span> title;     <span style="color: #000000;">&#125;</span> &nbsp;     <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #000000;">String</span> getContent<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>         <span style="color: #7F0055; font-weight: bold;">return</span> content;     <span style="color: #000000;">&#125;</span>   <span style="color: #000000;">&#125;</span></pre> <h3>Conclusion</h3> <p>Despite the fact that Resticle is in  first development step,   Rest support is by far simpler and elegant in scala than in java.  As described in first tutorial Vert.x java version is burdened with a frightening number of handlers. Will Vert.x 2.0 address this point using  <a href="https://github.com/vert-x/vert.x/wiki/Vert.x-2.0-plan" hreflang="en">Promises/Deferred APIs</a>&nbsp;?</p>