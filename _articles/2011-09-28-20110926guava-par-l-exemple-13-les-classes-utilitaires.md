---
ID: 103
post_title: 'Guava par l&#039;exemple (1/3) : les classes utilitaires'
author: ocroisier
post_date: 2011-09-28 09:26:00
post_excerpt: |
  <p>Guava est une librairie Java éditée par Google, qui fournit de nombreuses fonctionnalités qui auraient dû se trouver dans le JDK.</p> <p>Cette série d'articles n'a pas pour vocation de détailler toutes les classes de la librairie, mais d'en présenter une sélection facilement utilisables sur vos projets.<br />
  Chaque classe présentée est assortie d'un exemple sous la forme d'un test unitaire mettant en évidence son fonctionnement.</p> <p>Cet article fait partie d'une série&nbsp;:</p> <ul> <li><a href="/index.php?post/2011/09/26/Guava-par-l-exemple-%281/3%29-%3A-les-classes-utilitaires">Guava&nbsp;: les classes utilitaires</a></li> <li><a href="/index.php?post/2011/10/04/Guava-par-l-exemple-%282/3%29-%3A-les-collections">Guava&nbsp;: les collections</a></li> <li><a href="/index.php?post/2011/10/13/Guava-par-l-exemple-%283/3%29-%3A-I/O">Guava&nbsp;: I/O</a></li> </ul>
layout: post
permalink: http://blog.zenika-offres.com/?p=103
published: true
---
<p>Guava est une librairie Java éditée par Google, qui fournit de nombreuses fonctionnalités qui auraient dû se trouver dans le JDK.</p> <p>Cette série d'articles n'a pas pour vocation de détailler toutes les classes de la librairie, mais d'en présenter une sélection facilement utilisables sur vos projets.<br />
Chaque classe présentée est assortie d'un exemple sous la forme d'un test unitaire mettant en évidence son fonctionnement.</p> <p>Cet article fait partie d'une série&nbsp;:</p> <ul> <li><a href="/index.php?post/2011/09/26/Guava-par-l-exemple-%281/3%29-%3A-les-classes-utilitaires">Guava&nbsp;: les classes utilitaires</a></li> <li><a href="/index.php?post/2011/10/04/Guava-par-l-exemple-%282/3%29-%3A-les-collections">Guava&nbsp;: les collections</a></li> <li><a href="/index.php?post/2011/10/13/Guava-par-l-exemple-%283/3%29-%3A-I/O">Guava&nbsp;: I/O</a></li> </ul>
<!--more-->
<h3>Joiner / Splitter</h3> <p><code>Joiner</code> et <code>Splitter</code> sont deux classes utilitaires facilitant la transformation bidirectionnelle entre des ensembles d'objets et des chaînes de caractères.</p> <h4>Joiner</h4> <p><code>Joiner</code> prend un ensemble d'objets (<code>Collection</code>, <code>Iterable</code>, varargs...) et les joint grâce à un séparateur. Cette fonction est très utile pour générer du CSV par exemple (<code>val1;val2;val3</code>...)</p> <p>L'API de type <em>builder</em> permet de spécifier le caractère de séparation, et la façon de gérer les valeurs nulles&nbsp;: les ignorer (<code>skipNulls</code>) ou les remplacer (<code>useForNull</code>).</p> <p>Il existe une variante fonctionnant avec des Maps. Dans ce cas, il faut également préciser le caractère qui sépare les clés des valeurs (k1=v1, k2=v2...)</p> <pre class="java code java" style="font-family:inherit">@Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> joinVarArgs<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #000000;">String</span> result = <span style="color: #7F0055; font-weight: bold;">null</span>; &nbsp; 	Joiner joinerOnString = Joiner.<span style="color: #000000;">on</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;, &quot;</span><span style="color: #000000;">&#41;</span>; 	result = joinerOnString.<span style="color: #000000;">join</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Hello&quot;</span>, <span style="color: #888888;">&quot;World&quot;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Hello, World&quot;</span>, result<span style="color: #000000;">&#41;</span>; &nbsp; 	Joiner joinerOnChar = Joiner.<span style="color: #000000;">on</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">' '</span><span style="color: #000000;">&#41;</span>; 	result = joinerOnChar.<span style="color: #000000;">join</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Hello&quot;</span>, <span style="color: #888888;">&quot;World&quot;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Hello World&quot;</span>, result<span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> joinIterable<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #000000;">String</span> result = <span style="color: #7F0055; font-weight: bold;">null</span>; 	List<span style="color: #000000;">&lt;</span>String<span style="color: #000000;">&gt;</span> daltons = <span style="color: #000000;">Arrays</span>.<span style="color: #000000;">asList</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Joe&quot;</span>, <span style="color: #888888;">&quot;Jack&quot;</span>, <span style="color: #888888;">&quot;William&quot;</span>, <span style="color: #888888;">&quot;Averell&quot;</span><span style="color: #000000;">&#41;</span>; &nbsp; 	Joiner joiner = Joiner.<span style="color: #000000;">on</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;, &quot;</span><span style="color: #000000;">&#41;</span>; 	result = joiner.<span style="color: #000000;">join</span><span style="color: #000000;">&#40;</span>daltons<span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Joe, Jack, William, Averell&quot;</span>, result<span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> joinNulls<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #000000;">String</span> result = <span style="color: #7F0055; font-weight: bold;">null</span>; 	List<span style="color: #000000;">&lt;</span>String<span style="color: #000000;">&gt;</span> daltons = <span style="color: #000000;">Arrays</span>.<span style="color: #000000;">asList</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Joe&quot;</span>, <span style="color: #7F0055; font-weight: bold;">null</span>, <span style="color: #888888;">&quot;Jack&quot;</span>, <span style="color: #7F0055; font-weight: bold;">null</span>, <span style="color: #888888;">&quot;William&quot;</span>, <span style="color: #7F0055; font-weight: bold;">null</span>, <span style="color: #888888;">&quot;Averell&quot;</span><span style="color: #000000;">&#41;</span>; &nbsp; 	Joiner joinerSkippingNulls = Joiner.<span style="color: #000000;">on</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;, &quot;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">skipNulls</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; 	result = joinerSkippingNulls.<span style="color: #000000;">join</span><span style="color: #000000;">&#40;</span>daltons<span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Joe, Jack, William, Averell&quot;</span>, result<span style="color: #000000;">&#41;</span>; &nbsp; 	Joiner joinerReplacingNulls = Joiner.<span style="color: #000000;">on</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;, &quot;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">useForNull</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;&lt;null&gt;&quot;</span><span style="color: #000000;">&#41;</span>; 	result = joinerReplacingNulls.<span style="color: #000000;">join</span><span style="color: #000000;">&#40;</span>daltons<span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Joe, &lt;null&gt;, Jack, &lt;null&gt;, William, &lt;null&gt;, Averell&quot;</span>, result<span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> joinMap<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #000000;">String</span> result = <span style="color: #7F0055; font-weight: bold;">null</span>; 	Map<span style="color: #000000;">&lt;</span>String, Integer<span style="color: #000000;">&gt;</span> daltonsSize = <span style="color: #7F0055; font-weight: bold;">new</span> LinkedHashMap<span style="color: #000000;">&lt;</span>String, Integer<span style="color: #000000;">&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; 	daltonsSize.<span style="color: #000000;">put</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Joe&quot;</span>,      <span style="color: #cc66cc;">1</span><span style="color: #000000;">&#41;</span>; 	daltonsSize.<span style="color: #000000;">put</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Jack&quot;</span>,     <span style="color: #cc66cc;">2</span><span style="color: #000000;">&#41;</span>; 	daltonsSize.<span style="color: #000000;">put</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;William&quot;</span>,  <span style="color: #cc66cc;">3</span><span style="color: #000000;">&#41;
</span>; 	daltonsSize.<span style="color: #000000;">put</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Averell&quot;</span>,  <span style="color: #cc66cc;">4</span><span style="color: #000000;">&#41;</span>; &nbsp; 	Joiner.<span style="color: #000000;">MapJoiner</span> mapJoiner = Joiner.<span style="color: #000000;">on</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;, &quot;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">withKeyValueSeparator</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;=&quot;</span><span style="color: #000000;">&#41;</span>; 	result = mapJoiner.<span style="color: #000000;">join</span><span style="color: #000000;">&#40;</span>daltonsSize<span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Joe=1, Jack=2, William=3, Averell=4&quot;</span>, result<span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span></pre> <h4>Splitter</h4> <p><code>Splitter</code> fait l'inverse de <code>Joiner</code>&nbsp;: il découpe une chaîne de caractères pour en extraire une collection de valeurs. Il peut être très pratique pour parser des fichiers CSV.</p> <p><code>Splitter</code> peut découper selon un délimiteur fixe (type <code>String</code>) ou selon un <code>Pattern</code> (regex). Il peut également être paramétré pour supprimer les blancs autour des valeurs (<code>trimResults</code>) et/ou pour ignorer les valeurs vides (<code>omitEmptyStrings</code>).</p> <pre class="java code java" style="font-family:inherit">@Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> splitByString<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #000000;">String</span> daltons = <span style="color: #888888;">&quot;Joe, Jack, William, Averell&quot;</span>; 	<span style="color: #000000;">String</span> delimiter = <span style="color: #888888;">&quot;, &quot;</span>; &nbsp; 	Splitter splitterOnString = Splitter.<span style="color: #000000;">on</span><span style="color: #000000;">&#40;</span>delimiter<span style="color: #000000;">&#41;</span>; 	Iterable<span style="color: #000000;">&lt;</span>String<span style="color: #000000;">&gt;</span> split = splitterOnString.<span style="color: #000000;">split</span><span style="color: #000000;">&#40;</span>daltons<span style="color: #000000;">&#41;</span>; &nbsp; 	Iterator<span style="color: #000000;">&lt;</span>String<span style="color: #000000;">&gt;</span> iterator = split.<span style="color: #000000;">iterator</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Joe&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Jack&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;William&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Averell&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> splitByPattern<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #000000;">String</span> daltons = <span style="color: #888888;">&quot;Joe, Jack, William, Averell&quot;</span>; 	<span style="color: #000000;">String</span> delimiter = <span style="color: #888888;">&quot;,<span style="color: #000099; font-weight: bold;">\</span>s+&quot;</span>; &nbsp; 	Splitter splitterOnString = Splitter.<span style="color: #000000;">onPattern</span><span style="color: #000000;">&#40;</span>delimiter<span style="color: #000000;">&#41;</span>; 	Iterable<span style="color: #000000;">&lt;</span>String<span style="color: #000000;">&gt;</span> split = splitterOnString.<span style="color: #000000;">split</span><span style="color: #000000;">&#40;</span>daltons<span style="color: #000000;">&#41;</span>; &nbsp; 	Iterator<span style="color: #000000;">&lt;</span>String<span style="color: #000000;">&gt;</span> iterator = split.<span style="color: #000000;">iterator</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Joe&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Jack&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;William&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Averell&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> splitAndRemoveEmptyResults<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #000000;">String</span> daltons = <span style="color: #888888;">&quot;Joe, , Jack, , William, , Averell&quot;</span>; 	<span style="color: #000000;">String</span> delimiter = <span style="color: #888888;">&quot;, &quot;</span>; &nbsp; 	Splitter splitterOnString = Splitter.<span style="color: #000000;">on</span><span style="color: #000000;">&#40;</span>delimiter<span style="color: #000000;">&#41;</span>.<span style="color: #000000;">trimResults</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">omitEmptyStrings</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; 	Iterable<span style="color: #000000;">&lt;</span>String<span style="color: #000000;">&gt;</span> split = splitterOnString.<span style="color: #000000;">split</span><span style="color: #000000;">&#40;</span>daltons<span style="color: #000000;">&#41;</span>; &nbsp; 	Iterator<span style="color: #000000;">&lt;</span>String<span style="color: #000000;">&gt;</span> iterator = split.<span style="color: #000000;">iterator</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Joe&quot;<
/span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Jack&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;William&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Averell&quot;</span>, iterator.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span></pre> <p><br /></p> <h3>Objects</h3> <p><code>Objects</code> contient deux méthodes utiles au quotidien, et qui gèrent correctement les <code>null</code>&nbsp;:</p> <ul> <li><code>equal()</code> qui permet de tester l'égalité de deux instances&nbsp;;</li> <li><code>toStringHelper</code>, qui permet d'implémenter <code>toString</code> facilement, grâce à une API fluide.</li> </ul> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">private</span> <span style="color: #7F0055; font-weight: bold;">static</span> <span style="color: #7F0055; font-weight: bold;">class</span> Pojo <span style="color: #000000;">&#123;</span> &nbsp; 	<span style="color: #7F0055; font-weight: bold;">private</span> <span style="color: #7F0055; font-weight: bold;">final</span> <span style="color: #000000;">String</span> aString; 	<span style="color: #7F0055; font-weight: bold;">private</span> <span style="color: #7F0055; font-weight: bold;">final</span> <span style="color: #7F0055; font-weight: bold;">int</span> anInt; 	<span style="color: #7F0055; font-weight: bold;">private</span> <span style="color: #7F0055; font-weight: bold;">final</span> <span style="color: #000000;">Object</span> anObject; &nbsp; 	<span style="color: #7F0055; font-weight: bold;">private</span> Pojo<span style="color: #000000;">&#40;</span><span style="color: #000000;">String</span> aString, <span style="color: #7F0055; font-weight: bold;">int</span> anInt, <span style="color: #000000;">Object</span> anObject<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 		<span style="color: #7F0055; font-weight: bold;">this</span>.<span style="color: #000000;">aString</span> = aString; 		<span style="color: #7F0055; font-weight: bold;">this</span>.<span style="color: #000000;">anInt</span> = anInt; 		<span style="color: #7F0055; font-weight: bold;">this</span>.<span style="color: #000000;">anObject</span> = anObject; 	<span style="color: #000000;">&#125;</span> &nbsp; 	@Override 	<span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #000000;">String</span> toString<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 		<span style="color: #7F0055; font-weight: bold;">return</span> Objects.<span style="color: #000000;">toStringHelper</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">this</span><span style="color: #000000;">&#41;</span> 				.<span style="color: #000000;">add</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;aString&quot;</span>, aString<span style="color: #000000;">&#41;</span> 				.<span style="color: #000000;">add</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;anInt&quot;</span>, anInt<span style="color: #000000;">&#41;</span> 				.<span style="color: #000000;">add</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;anObject&quot;</span>, anObject<span style="color: #000000;">&#41;</span> 				.<span style="color: #000000;">toString</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; 	<span style="color: #000000;">&#125;</span> &nbsp; <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> equal<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	Pojo pojo = <span style="color: #7F0055; font-weight: bold;">new</span> Pojo<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;foo&quot;</span>, <span style="color: #cc66cc;">42</span>, <span style="color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span>; 	assertTrue<span style="color: #000000;">&#40;</span>Objects.<span style="color: #000000;">equal</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">null</span>, <span style="color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertFalse<span style="color: #000000;">&#40;</span>Objects.<span style="color: #000000;">equal</span><span style="color: #000000;">&#40;</span>pojo, <span style="color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertFalse<span style="color: #000000;">&#40;</span>Objects.<span style="color: #000000;">equal</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">null</span>, pojo<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertTrue<span style="color: #000000;">&#40;</span>Objects.<span style="color: #000000;">equal</span><span style="color: #000000;">&#40;</span>pojo, pojo<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertFalse<span style="color: #000000;">&#40;</span>Objects.<span style="color: #000000;">equal</span><span style="color: #000000;">&#40;</span>pojo, <span style="color: #7F0055; font-weight: bold;">new</span> <span style="color: #000000;">Object</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> toStringHelper<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Pojo{aString=foo, anInt=42, anObject=null}&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Pojo<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;foo&quot;</span>, <span style="color: #cc66cc;">42</span>, <span style="color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">toString</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Pojo{aString=foo, anInt=42, anObject=bar}&quot;</span>, <span style="color: #7F0055; font-weight: bold;">new</span> Pojo<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;foo&quot;</span>, <span style="color: #cc66cc;">42</span>, <span style="color: #888888;">&quot;bar&quot;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">toString</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</s
pan><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span></pre> <p><br /></p> <h3>Preconditions</h3> <p>La classe <code>Preconditions</code> propose deux méthodes facilitant la vérification des paramètres passés en entrée des méthodes.</p> <ul> <li><code>checkNotNull</code> vérifie la non-nullité du paramètre, et lance un <code>NullPointerException</code> si besoin.</li> <li><code>checkArgument</code> vérifie la validité du paramètre grâce à une expression de validation, et lance un <code>IllegalArgumentException</code> si besoin.</li> </ul> <p>Les deux méthodes peuvent également prendre en paramètre une chaîne de caractères (simple ou à formater), qui sera utilisée comme message si une exception est lancée.</p> <p>Notes à propos du débat <code>IllegalArgumentException</code> vs <code>NullPointerException</code>&nbsp;: certaines personnes n'aiment pas lancer NullPointerException "manuellement" et considèrent que c'est une mauvaise pratique. Pourtant, tout le monde s'accorde sur le fait qu'il faut toujours lancer l'exception la plus précise et décrivant le mieux le cas d'erreur rencontré. Dans le cas où l'on a fourni par mégarde une référence nulle à votre méthode, c'est bien le NPE qui correspond le mieux, et qui doit donc être lancé. L'intégralité du code du JDK est basé sur cette règle, et le code de Google également. Alors pourquoi pas le vôtre&nbsp;?</p> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">private</span> <span style="color: #7F0055; font-weight: bold;">void</span> methodWithNotNullParam<span style="color: #000000;">&#40;</span><span style="color: #000000;">String</span> param<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #808080; font-style: italic;">// Preconditions.checkNotNull(param);</span> 	<span style="color: #808080; font-style: italic;">// Preconditions.checkNotNull(param, &quot;Parameter 'param' must not be null&quot;);</span> 	Preconditions.<span style="color: #000000;">checkNotNull</span><span style="color: #000000;">&#40;</span>param, <span style="color: #888888;">&quot;Parameter '%s' must not be null&quot;</span>, <span style="color: #888888;">&quot;param&quot;</span><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span> &nbsp; <span style="color: #7F0055; font-weight: bold;">private</span> <span style="color: #7F0055; font-weight: bold;">void</span> methodWithValidParam<span style="color: #000000;">&#40;</span><span style="color: #000000;">String</span> param<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #808080; font-style: italic;">// Preconditions.checkArgument(param.trim().length() &gt; 0);</span> 	<span style="color: #808080; font-style: italic;">// Preconditions.checkArgument(param.trim().length() &gt; 0, &quot;Parameter 'param' must not be empty&quot;);</span> 	Preconditions.<span style="color: #000000;">checkArgument</span><span style="color: #000000;">&#40;</span>param.<span style="color: #000000;">trim</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">length</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&gt;</span> 0, <span style="color: #888888;">&quot;Parameter '%s' must not be empty&quot;</span>, <span style="color: #888888;">&quot;param&quot;</span><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> testMethodWithNotNullParam<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #7F0055; font-weight: bold;">try</span> <span style="color: #000000;">&#123;</span> 		methodWithNotNullParam<span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span>; 		fail<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Target method should have thrown an exception&quot;</span><span style="color: #000000;">&#41;</span>; 	<span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">catch</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">NullPointerException</span> npe<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 		assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Parameter 'param' must not be null&quot;</span>, npe.<span style="color: #000000;">getMessage</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	<span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> testMethodWithValidParam<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #7F0055; font-weight: bold;">try</span> <span style="color: #000000;">&#123;</span> 		methodWithValidParam<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;&quot;</span><span style="color: #000000;">&#41;</span>; 		fail<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Target method should have thrown an exception&quot;</span><span style="color: #000000;">&#41;</span>; 	<span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">catch</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">IllegalArgumentException</span> iae<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 		assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Parameter 'param' must not be empty&quot;</span>, iae.<span style="color: #000000;">getMessage</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	<span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <p><br /></p> <h3>Strings</h3> <p>La classe utilitaire <code>Strings</code> fournit une poignée de méthodes qui manquent dans la classe <code>String</code>&nbsp;: - pour la gestion des chaînes nulles ou vides&nbsp;: <code>emptyToNull</code>, <code>nullToEmpty</code>, <code>isNullOrEmpty</code> - pour ajouter du padding&nbsp;: <code>padStart</code> et <code>padEnd</code> - pour répéter une chaîne&nbsp;: <code>repeat</code></p> <pre class="java code java" style="font-family:inherit">@Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> nullString<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #000000;">String</span> nullString = <span style="color: #7F0055; font-weight: bold;">null</span>; 	<span style="color: #000000;">String</span> emptyString = <span style="color: #888888;">&quot;&quot;</span>; 	<span style="color: #000000;">String</span> someString = <span style="color: #888888;">&quot;Hello World&quot;</span>; &nbsp; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">null</span>, Strings.<span style="color: #000000;">emptyToNull</span><span style="color: #000000;">&#40;</span>nullString<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">null</span>, Strings.<span style="color: #000000;">emptyToNull</span><spa
n style="color: #000000;">&#40;</span>emptyString<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span>someString, Strings.<span style="color: #000000;">emptyToNull</span><span style="color: #000000;">&#40;</span>someString<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; &nbsp; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;&quot;</span>, Strings.<span style="color: #000000;">nullToEmpty</span><span style="color: #000000;">&#40;</span>nullString<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;&quot;</span>, Strings.<span style="color: #000000;">nullToEmpty</span><span style="color: #000000;">&#40;</span>emptyString<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span>someString, Strings.<span style="color: #000000;">nullToEmpty</span><span style="color: #000000;">&#40;</span>someString<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; &nbsp; 	assertTrue<span style="color: #000000;">&#40;</span>Strings.<span style="color: #000000;">isNullOrEmpty</span><span style="color: #000000;">&#40;</span>nullString<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertTrue<span style="color: #000000;">&#40;</span>Strings.<span style="color: #000000;">isNullOrEmpty</span><span style="color: #000000;">&#40;</span>emptyString<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertFalse<span style="color: #000000;">&#40;</span>Strings.<span style="color: #000000;">isNullOrEmpty</span><span style="color: #000000;">&#40;</span>someString<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> padding<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #000000;">String</span> greeting = <span style="color: #888888;">&quot;Hello World&quot;</span>; 	<span style="color: #7F0055; font-weight: bold;">char</span> padding = <span style="color: #888888;">'.'</span>; &nbsp; 	assertEquals<span style="color: #000000;">&#40;</span>greeting, Strings.<span style="color: #000000;">padStart</span><span style="color: #000000;">&#40;</span>greeting, -<span style="color: #cc66cc;">1</span>, padding<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span>greeting, Strings.<span style="color: #000000;">padStart</span><span style="color: #000000;">&#40;</span>greeting, 0, padding<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;....&quot;</span>+greeting, Strings.<span style="color: #000000;">padStart</span><span style="color: #000000;">&#40;</span>greeting, <span style="color: #cc66cc;">15</span>, padding<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; &nbsp; 	assertEquals<span style="color: #000000;">&#40;</span>greeting, Strings.<span style="color: #000000;">padEnd</span><span style="color: #000000;">&#40;</span>greeting, -<span style="color: #cc66cc;">1</span>, padding<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span>greeting, Strings.<span style="color: #000000;">padEnd</span><span style="color: #000000;">&#40;</span>greeting, 0, padding<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span>greeting+<span style="color: #888888;">&quot;....&quot;</span>, Strings.<span style="color: #000000;">padEnd</span><span style="color: #000000;">&#40;</span>greeting, <span style="color: #cc66cc;">15</span>, padding<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span> &nbsp; @Test <span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> repeat<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	<span style="color: #000000;">String</span> laugh = <span style="color: #888888;">&quot;ha&quot;</span>; &nbsp; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;&quot;</span>, Strings.<span style="color: #000000;">repeat</span><span style="color: #000000;">&#40;</span>laugh, 0<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;ha&quot;</span>, Strings.<span style="color: #000000;">repeat</span><span style="color: #000000;">&#40;</span>laugh, <span style="color: #cc66cc;">1</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	assertEquals<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;hahaha&quot;</span>, Strings.<span style="color: #000000;">repeat</span><span style="color: #000000;">&#40;</span>laugh, <span style="color: #cc66cc;">3</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span></pre> <h3>Conclusion</h3> <p>Les classes utilitaires de Guava fournissent des méthodes qui mériteraient de figurer dans le JDK, et qui sont actuellement réimplémentées "à la main" dans la majorité des projets.</p> <p>En utilisant Guava, vous bénéficiez d'un code robuste concentrant tout le savoir-faire de Google, et vous pouvez vous concentrer sur l'écriture de code à valeur ajoutée.</p> <p>Dans le prochain billet, je vous présenterai les classes et concepts liés à la gestion des Collections. Stay tuned&nbsp;!</p>