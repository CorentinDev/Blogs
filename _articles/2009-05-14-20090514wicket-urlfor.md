---
ID: 72
post_title: 'Wicket : déterminer le chemin vers une ressource'
author: fweber
post_date: 2009-05-14 11:02:00
post_excerpt: |
  <p>En Wicket, tout est tellement automatisé que l'on oublie vite à quel point ses mécanismes nous simplifient la vie !<br />
  Besoin de créer un lien&nbsp;? Il suffit de passer en paramètre de la méthode "setResponsePage" la classe de la page et c'est fait&nbsp;:</p> <pre class="java code java" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #7F0055; font-weight: bold;">this</span>.<span style="color: #000000;">add</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">new</span> Link<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;linkID&quot;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	@Override</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> onClick<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #7F0055; font-weight: bold;">this</span>.<span style="color: #000000;">setResponsePage</span><span style="color: #000000;">&#40;</span>MaPage.<span style="color: #7F0055; font-weight: bold;">class</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>;</div></li></ol></pre>
layout: post
permalink: http://blog.zenika-offres.com/?p=72
published: true
---
<p>En Wicket, tout est tellement automatisé que l'on oublie vite à quel point ses mécanismes nous simplifient la vie !<br />
Besoin de créer un lien&nbsp;? Il suffit de passer en paramètre de la méthode "setResponsePage" la classe de la page et c'est fait&nbsp;:</p> <pre class="java code java" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #7F0055; font-weight: bold;">this</span>.<span style="color: #000000;">add</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">new</span> Link<span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;linkID&quot;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	@Override</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> onClick<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #7F0055; font-weight: bold;">this</span>.<span style="color: #000000;">setResponsePage</span><span style="color: #000000;">&#40;</span>MaPage.<span style="color: #7F0055; font-weight: bold;">class</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>;</div></li></ol></pre>
<!--more-->
<p>Envie d'insérer une image&nbsp;? Copiez-la dans le répertoire de l'application, ajoutez une "ResourceReference" puis insérez l'image avec le markup associé et le tour est joué&nbsp;: Wicket se chargera pour vous de retrouver l'image adéquate&nbsp;!</p> <pre class="java code java" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">ResourceReference image = <span style="color: #7F0055; font-weight: bold;">new</span> ResourceReference<span style="color: #000000;">&#40;</span>MyClass.<span style="color: #7F0055; font-weight: bold;">class</span>, <span style="color: #888888;">&quot;myImage.png&quot;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">myPage.<span style="color: #000000;">add</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">new</span> <span style="color: #000000;">Image</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;imageID&quot;</span>, image<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;</div></li></ol></pre> <pre class="html code html" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #009900;">&lt;image <span style="color: #000066;">src</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;&quot;</span> wicket:<span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;imageID&quot;</span><span style="color: #66cc66;">/</span>&gt;</span></div></li></ol></pre> <p>Hélas, tout n'est pas Wicket et il faut parfois recourir à d'autres langages comme, par exemple, JavaScript. Dans pareil cas, vous pouvez avoir besoin de connaître "textuellement" l'URL d'une page ou d'une image afin de pouvoir y faire référence. C'est ce que vous propose la méthode "urlFor()"</p> <h5>Adresses des Ressources</h5> <p>On souhaite obtenir l'adresse d'une ResourceReference associée à l'image "myImage.png" .<br />
Cette image étant une ressource au sens Wicket, elle sera déployée dans le répertoire protégé "WEB-INF/classes", et sera donc inaccessible directement. Pour contourner cette restriction, Wicket propose un mapping spécial ("/resources") mais les bonnes pratiques de développement nous interdisent de l'utiliser explicitement. Il faut donc user du subterfuge suivant&nbsp;:</p> <pre class="java code java" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">String</span> imagePath = RequestCycle.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">urlFor</span><span style="color: #000000;">&#40;</span>image<span style="color: #000000;">&#41;</span>.<span style="color: #000000;">toString</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li></ol></pre> <p>... qui va renvoyer (par exemple)&nbsp;: "http://localhost:8080/wicketApp/resources/&lt;myPackageName&gt;.&lt;myClassName&gt;/myImage.png"</p> <h5>Adresse des pages</h5> <p>De la même façon, on peut obtenir l'adresse d'une page&nbsp;:</p> <pre class="java code java" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">String</span> pagePath = parent.<span style="color: #000000;">urlFor</span><span style="color: #000000;">&#40;</span>myPage.<span style="color: #7F0055; font-weight: bold;">class</span>, <span style="color: #7F0055; font-weight: bold;">new</span> PageParameters<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>.<span style="color: #000000;">toString</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li></ol></pre> <p>... va renvoyer la String permettant d'accéder à la page recherchée.</p> <p>Avec Wicket, tout est simple&nbsp;!</p>