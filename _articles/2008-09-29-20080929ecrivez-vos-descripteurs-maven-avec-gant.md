---
ID: 153
post_title: >
  Écrivez vos descripteurs Maven avec
  Gant
author: Grégory Boissinot
post_date: 2008-09-29 16:30:00
post_excerpt: '<p><a href="http://gant.codehaus.org/">Gant</a> est un outil de construction au dessus de <a href="http://ant.apache.org/">Ant</a> avec la syntaxe du langage dynamique Groovy. Il permet en autre, d’écrire des scripts Ant en langage <a href="http://groovy.codehaus.org/">Groovy</a>. Un des avantages est la flexibilité d’écriture du processus de construction, contrairement au XML de ANT qui peut devenir très vite illisible et non maintenable.</p>'
layout: post
permalink: http://blog.zenika-offres.com/?p=153
published: true
---
<p><a href="http://gant.codehaus.org/">Gant</a> est un outil de construction au dessus de <a href="http://ant.apache.org/">Ant</a> avec la syntaxe du langage dynamique Groovy. Il permet en autre, d’écrire des scripts Ant en langage <a href="http://groovy.codehaus.org/">Groovy</a>. Un des avantages est la flexibilité d’écriture du processus de construction, contrairement au XML de ANT qui peut devenir très vite illisible et non maintenable.</p>
<!--more-->
<p><a href="http://maven.apache.org/">Maven</a>, outil de construction très populaire et très utilisé, a le bénéfice des conventions en proposant une structure de répertoire commune et un cycle de vie composé d’une séquence de phases où chaque phase exécute un ensemble de plugins encapsulant la logique de construction.</p> <p>La plupart des plugins Maven sont écrits en Java. <br />
Il est possible d’écrire ces plugins Maven en langage Groovy avec le plugin “groovy-maven-plugin”&nbsp;:</p> <pre class="xml code xml" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;plugin<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;groupId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>org.codehaus.mojo.groovy<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/groupId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;artifactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>groovy-maven-plugin<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/artifactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;version<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>1.0-beta-3<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/version<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;extensions<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>true<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/extensions<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;executions<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;execution<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goals<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">				<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>generateStubs<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">				<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>compile<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">				<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>generateTestStubs<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">				<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>testCompile<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goals<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/execution<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/executions<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/plugin<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li></ol></pre> <p>Néanmoins, Maven manque de flexibilité dans l’écriture de la logique de construction à travers ces descripteurs (pom.xml) écrit en XML. Et malgré les conventions, les descripteurs Maven deviennent en pratique très vite complexes et difficilement lisibles.</p> <p>Gant peut apporter une solution élégante. Voici le descripteur d’un projet Maven écrit avec Gant&nbsp;:</p> <pre class="groovy code groovy" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">projectVersion <span style="color: #66cc66;">=</span> ‘<span style="color: #cc66cc;">1.0</span>′</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">includeTargets <span style="color: #66cc66;">**</span> gant.<span style="color: #006600;">targets</span>.<span style="color: #006600;">Maven</span> <span style="color: #66cc66;">*</span> <span style="color: #66cc66;">&#91;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	groupId : <span style="color: #ff0000;">'com.zenika.formatio
n'</span> ,</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	artifactId : <span style="color: #ff0000;">'resanet-tools'</span> ,</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	version : projectVersion ,</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	packaging : <span style="color: #ff0000;">'jar'</span>,</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	javaCompileProperties : <span style="color: #66cc66;">&#91;</span> source : <span style="color: #ff0000;">'1.5'</span> , target : <span style="color: #ff0000;">'1.5'</span> , debug : <span style="color: #ff0000;">'true'</span> <span style="color: #66cc66;">&#93;</span> ,</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	compileDependencies : <span style="color: #66cc66;">&#91;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #66cc66;">&#91;</span> groupId : <span style="color: #ff0000;">'log4j'</span> , artifactId : <span style="color: #ff0000;">'log4j'</span> , version : <span style="color: #ff0000;">'1.2.14'</span><span style="color: #66cc66;">&#93;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #66cc66;">&#93;</span> ,</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	testDependencies : <span style="color: #66cc66;">&#91;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #66cc66;">&#91;</span> groupId : <span style="color: #ff0000;">'junit'</span> , artifactId : <span style="color: #ff0000;">'junit'</span> , version : <span style="color: #ff0000;">'3.8.1'</span> <span style="color: #66cc66;">&#93;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #66cc66;">&#93;</span> ,</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	deployURL : ‘http:<span style="color: #808080; font-style: italic;">//zenikaserver:8090/archiva/internal’ , </span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	deploySnapshotURL : ‘http:<span style="color: #808080; font-style: italic;">//zenikaserver:8090/archiva/snapshots’</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #66cc66;">&#93;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">setDefaultTarget <span style="color: #66cc66;">&#40;</span> install <span style="color: #66cc66;">&#41;</span></div></li></ol></pre> <p>On peut apprécier la facilité de mise en œuvre des dépendances.</p> <p>Aujourd’hui de nombreuses target ne sont pas supporté comme celle du cycle de vie “site”. De même, la plupart des types de projets Maven ne sont pas pris en compte. Néanmoins, cette intégration entre Gant et Maven est prometteuse.</p> <p>A noter aussi, deux autres projets connexes à surveiller:</p> <ul> <li><a href="http://www.gradle.org/">Gradle</a></li> <li><a href="http://incubator.apache.org/buildr/">Buildr</a></li> </ul>