---
ID: 425
post_title: >
  Développer des applications Web Mobiles
  avec GWT
author: jvey
post_date: 2011-03-10 13:59:00
post_excerpt: |
  <p>Vous venez de développer une application web qui va faire fureur au sein de votre entreprise et vous souhaitez la porter sur mobile&nbsp;? Malheureusement, vos collaborateurs ne se sont pas donnés le mot pour choisir leur smartphone&nbsp;: IPhone pour les uns, Android ou Blackberry pour les autres... De plus, pour vous l’Objective-C... pfff... sans façon ?<br /></p> <p>Alors... que faire ??<br /></p> <p>Vous avez surement entendu parlé de ces nouveaux frameworks mobiles utilisant JavaScript et CSS3 pour reproduire le look &amp; feel des applications natives. Nous pouvons notamment citer jQtouch ou JQuery Mobile (bientôt en version 1.0 finale). Mais comment les interfacer avec votre back-end utilisant les dernières technologies à la mode ?<br /></p> <p>Une solution à envisager&nbsp;: GWT<br /></p> <p>Dans cette article, je vais vous présenter comment développer une application web ayant le "Look &amp; Feel" d'une application IPhone en utilisant à la fois GWT et jQtouch. Pour l'exemple, je vais créer une application de visualisation des conférences et formations proposées par <a href="http://www.zenika.com/?fg=50007">Zenika</a>.<br /></p>
layout: post
permalink: http://blog.zenika-offres.com/?p=425
published: true
slide_template:
  - ""
---
<p>Vous venez de développer une application web qui va faire fureur au sein de votre entreprise et vous souhaitez la porter sur mobile&nbsp;? Malheureusement, vos collaborateurs ne se sont pas donnés le mot pour choisir leur smartphone&nbsp;: IPhone pour les uns, Android ou Blackberry pour les autres... De plus, pour vous l’Objective-C... pfff... sans façon ?<br /></p> <p>Alors... que faire ??<br /></p> <p>Vous avez surement entendu parlé de ces nouveaux frameworks mobiles utilisant JavaScript et CSS3 pour reproduire le look &amp; feel des applications natives. Nous pouvons notamment citer jQtouch ou JQuery Mobile (bientôt en version 1.0 finale). Mais comment les interfacer avec votre back-end utilisant les dernières technologies à la mode ?<br /></p> <p>Une solution à envisager&nbsp;: GWT<br /></p> <p>Dans cette article, je vais vous présenter comment développer une application web ayant le "Look &amp; Feel" d'une application IPhone en utilisant à la fois GWT et jQtouch. Pour l'exemple, je vais créer une application de visualisation des conférences et formations proposées par <a href="http://www.zenika.com/?fg=50007">Zenika</a>.<br /></p>
<!--more-->
<h2>Design de l'application</h2> <p>Comme présenté en introduction de cet article, il existe plusieurs frameworks basés sur JQuery, spécialisés pour le développement d'applications mobile. Celui présenté dans cet articile est <a href="http://www.jqtouch.com/">JQTouch</a>. Parmi les autres, nous trouvons notamment Sencha Touch ou JQuery Mobile, encore en version bêta, mais qui s'annoncent prometteurs.<br /></p> <p>Dans le concept des applications web mobiles, une "application" équivaut à une seule page html et un "écran" équivaut à un &lt;div&gt; dans cette page.<br /></p> <p>Nous allons mettre en place la navigation suivante entre les différentes écran:<br /></p> <p><img src="/wp-content/uploads/2015/07/.navigation_s.jpg" alt="Navigation" style="display:block; margin:0 auto;" title="Navigation" /><br /></p> <p>Tout d'abord, il faut spécifier à JQTouch le corps de notre application avec une balise div</p> <pre class="html code html" style="font-family:inherit"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;jqt&quot;</span>&gt;</span>     ... <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span></pre> <p>Ensuite, créer chaque écran au sein de cette balise.<br /></p> <p><em>Note&nbsp;: Les attributs s-pane, s-scrollwrapper et s-scrollpane permettent l'intégration avec IScroll, un autre framework qui facilite la manipulation des headers &amp; footers</em></p> <pre class="html code html" style="font-family:inherit"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;home&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;s-pane&quot;</span>&gt;</span>     <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;toolbar&quot;</span>&gt;</span>         <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">h1</span>&gt;</span>Zenika Mobile<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">h1</span>&gt;</span>     <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span>     <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;s-scrollwrapper&quot;</span>&gt;</span>         <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;s-scrollpane&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;homepane&quot;</span>&gt;</span>             <span style="color: #808080; font-style: italic;">&lt;!-- Corps de l'écran --&gt;</span>         <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span>     <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span> <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span></pre> <p>Et voilà, les écrans de l'application sont créés. Il suffit maintenant d'ajouter des liens entre nos pages en créant de simples listes html et en y ajoutant des attributs "class" dans le corps de l'écran.</p> <pre class="html code html" style="font-family:inherit"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">ul</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;rounded&quot;</span>&gt;</span>     <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">li</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;arrow&quot;</span>&gt;</span>         <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">a</span> <span style="color: #000066;">href</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;#formations&quot;</span>&gt;</span>Formations<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">a</span>&gt;</span>     <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">li</span>&gt;</span>     <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">li</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;arrow&quot;</span>&gt;</span>         <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">a</span> <span style="color: #000066;">href</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;#conferences&quot;</span>&gt;</span>Conférences<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">a</span>&gt;</span>     <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">li</span>&gt;</span>     <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">li</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;arrow&quot;</span>&gt;</span>         <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">a</span> <span style="color: #000066;">href</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;#experts&quot;</span>&gt;</span>Experts<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">a</span>&gt;</span>     <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">li</span>&gt;</span> <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">ul</span>&gt;</span></pre> <p>Le rendu sur un téléphone Android&nbsp;: <img src="/wp-content/uploads/2015/07/.EcranAcceuil_s.jpg" alt="EcranAcceuil" style="display:block; margin:0 auto;" title="EcranAcceuil" /></p> <p>Il est également possible d'ajouter des boutons dans la "toolbar" de l'écran en ajoutant simplement un div&nbsp;:</p> <pre class="html code html" style="font-family:inherit"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">a</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;back&quot;</span>&gt;</span>Acceuil<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">a</span>&gt;</span></pre> <p>ce qui donne <img src="/wp-content/uploads/2015/07/toolbarBack.PNG" alt="Toolbar" style="display:block; margin:0 auto;" title="Toolbar" /></p> <h2>Intéraction Client/Serveur avec GWT</h2> <p>Maintenant que toutes les pages sont créées, encore faut-il les remplir, et c'est là que GWT intervient. Voici le corps de l'écran "Formations" dans le fichier html de l'application&nbsp;:</p> <pre class="html code html" style="font-family:inherit"><span style="color: #00990
0;">&lt;<span style="color: #000000; font-weight: bold;">h1</span> <span style="color: #000066;">align</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;center&quot;</span>&gt;</span>Les Prochaines Formations<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">h1</span>&gt;&lt;<span style="color: #000000; font-weight: bold;">br</span>&gt;</span> <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;formationres&quot;</span>&gt;</span> &nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span></pre> <p>Les formations vont être récupérées sur le serveur au démarrage de l'application. Pour cela, lors de l'initialisation du module GWT, nous faisons appel à un service RPC GWT qui va collecter sur le serveur la liste des formations à venir.</p> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">private</span> <span style="color: #7F0055; font-weight: bold;">void</span> initializeFormations<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	dataService.<span style="color: #000000;">getAllFormations</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">new</span> AsyncCallback<span style="color: #000000;">&lt;</span>List<span style="color: #000000;">&lt;</span>Formation<span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> &nbsp; 		@Override 		<span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> onSuccess<span style="color: #000000;">&#40;</span>List<span style="color: #000000;">&lt;</span>Formation<span style="color: #000000;">&gt;</span> result<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 			fillFormations<span style="color: #000000;">&#40;</span>result<span style="color: #000000;">&#41;</span>; 		<span style="color: #000000;">&#125;</span> &nbsp; 		@Override 		<span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">void</span> onFailure<span style="color: #000000;">&#40;</span><span style="color: #000000;">Throwable</span> caught<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 		<span style="color: #000000;">&#125;</span> 	<span style="color: #000000;">&#125;</span><span style="color: #000000;">&#41;</span>; <span style="color: #000000;">&#125;</span></pre> <p>Nous allons ensuite remplir l'écran avec ces mêmes données.</p> <pre class="java code java" style="font-family:inherit"><span style="color: #7F0055; font-weight: bold;">protected</span> <span style="color: #7F0055; font-weight: bold;">void</span> fillFormations<span style="color: #000000;">&#40;</span>List<span style="color: #000000;">&lt;</span>Formation<span style="color: #000000;">&gt;</span> result<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 	RootPanel formationPanel = RootPanel.<span style="color: #000000;">get</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;formationres&quot;</span><span style="color: #000000;">&#41;</span>; 	formationPanel.<span style="color: #000000;">clear</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; &nbsp; 	<span style="color: #7F0055;font-weight: bold;">if</span> <span style="color: #000000;">&#40;</span>result == <span style="color: #7F0055; font-weight: bold;">null</span> || result.<span style="color: #000000;">size</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> == 0<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 		formationPanel.<span style="color: #000000;">add</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">new</span> <span style="color: #000000;">Label</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Aucune formation correspondante&quot;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 	<span style="color: #000000;">&#125;</span> <span style="color: #7F0055;font-weight: bold;">else</span> <span style="color: #000000;">&#123;</span> 		RowList list = <span style="color: #7F0055; font-weight: bold;">new</span> RowList<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; 		Row row; 		Anchor a; 		<span style="color: #7F0055;font-weight: bold;">for</span> <span style="color: #000000;">&#40;</span>Formation f : result<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span> 			row = <span style="color: #7F0055; font-weight: bold;">new</span> Row<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; 			row.<span style="color: #000000;">addStyleName</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;arrow&quot;</span><span style="color: #000000;">&#41;</span>; 			a = <span style="color: #7F0055; font-weight: bold;">new</span> Anchor<span style="color: #000000;">&#40;</span>f.<span style="color: #000000;">getTitle</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 			a.<span style="color: #000000;">setHref</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;#formationdetail&quot;</span><span style="color: #000000;">&#41;</span>; 			row.<span style="color: #000000;">add</span><span style="color: #000000;">&#40;</span>a<span style="color: #000000;">&#41;</span>; 			row.<span style="color: #000000;">addClickHandler</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">new</span> FormationClickHandler<span style="color: #000000;">&#40;</span>f<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 			list.<span style="color: #000000;">add</span><span style="color: #000000;">&#40;</span>row<span style="color: #000000;">&#41;</span>; 		<span style="color: #000000;">&#125;</span> 		formationPanel.<span style="color: #000000;">add</span><span style="color: #000000;">&#40;</span>list<span style="color: #000000;">&#41;</span>; 	<span style="color: #000000;">&#125;</span> <span style="color: #000000;">&#125;</span></pre> <p>Tout d'abord, nous récupérons le panel ayant l'id "formationres" (celui qui va contenir la liste des formations).<br /><br />
Ensuite, si aucune formation n'a été trouvée, nous ajoutons dans ce panel un label indiquant l'absence de résultats..<br /><br />
Enfin, pour chaque formation récupérée, nous instancions une liste "RowList", qui est un widget personnalisé correspondant à une liste &lt;ul&gt;, auquel nous ajoutons des "Row" (un autre widget correspondant à l'élément &lt;li&gt; et implémentant différents handlers GWT). Ensuite, dans ce "Row", nous ajoutons une "Anchor" GWT avec pour texte le nom de la formation et pour cible l'écran "formationdetail" qui a été créé dans la page html. Nous ajoutons également un ClickHandler sur celui-ci afin, lors d'un clic sur ce lien, remplir les différents champs de l'écran "formationdetail" avec les valeurs de la formation cliquée.<br /><br /></p> <p>Nous pouvons ensuite répéter l'opération pour les conférences ainsi que les experts.<br /></p> <h2>Conclusion</h2> <p><br />
Grâce à cet exemple simple, nous avons illustré comment GWT peut nous aider à développer une application web mobile simplement et sans trop d'investissement. L'avantage de GWT par rapport à d'autres framework web est triple. Tout d'abord, la simplicité des services RPC, ensuite la réutilisation des objets Java de l'interface web jusqu'au serveur et enfin les API de manipulation du DOM qui permettent de s'adapter aux spécificités des différents frameworks de développement mobiles.<br /></p> <p>Les sources de cette application sont disponibles sur <a href="https://github.com/Zenika/Blogs/tree/master/20110310_Applications-Web-Mobiles-avec-GWT">le Github Zenika</a> <a href="https://github.com/Zenika/Blogs/tree/master/20110310_Applications-Web-Mobiles-avec-GWT">ici</a><br /></p> <p>Pour ceux qui souhaitent aller plus loin dans le développement d'applications mobiles avec gwt, je vous conseille de regarder du côté de <a href="http://code.google.com/p/gwt-mobile-webkit/">gwt-mobile-webkit</a>, une librairie Java qui "wrap" les API HTML5 (notamment Database &amp; Storage API) et qui pourra notamment vous aider à passer vos applications mobiles hors-ligne.</p>