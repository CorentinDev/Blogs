---
ID: 78
post_title: Premier WebService avec Grails
author: ldelvaux
post_date: 2009-09-22 11:30:00
post_excerpt: |
  <p><a href="http://www.grails.org/">Grails</a> est un framework permettant de simplifier à l'extrême la mise en place et le développement d'une application Java/JEE tout en conservant la puissance des outils qui le composent (par exemple Spring, Hibernate ou XFire). De plus, la possibilité de coder l'application en <a href="http://groovy.codehaus.org/">Groovy</a> comble l'absence de flexibilité que certains reprochent aujourd'hui au langage Java. Néanmoins avec Grails, le développeur a toujours le choix de coder en Java, en Groovy ou les deux&nbsp;!</p> <p>A des fins d'illustration, nous allons créer un WebService qui convertit des degrés Celsius en degrés Fahrenheit (et inversement).</p>
layout: post
permalink: http://blog.zenika-offres.com/?p=78
published: true
---
<p><a href="http://www.grails.org/">Grails</a> est un framework permettant de simplifier à l'extrême la mise en place et le développement d'une application Java/JEE tout en conservant la puissance des outils qui le composent (par exemple Spring, Hibernate ou XFire). De plus, la possibilité de coder l'application en <a href="http://groovy.codehaus.org/">Groovy</a> comble l'absence de flexibilité que certains reprochent aujourd'hui au langage Java. Néanmoins avec Grails, le développeur a toujours le choix de coder en Java, en Groovy ou les deux&nbsp;!</p> <p>A des fins d'illustration, nous allons créer un WebService qui convertit des degrés Celsius en degrés Fahrenheit (et inversement).</p>
<!--more-->
<h2>Installation</h2> <p>Après avoir <a href="http://www.grails.org/Installation">installé Grails sur votre plateforme</a>, il convient également d'installer le <a href="http://grails.org/XFire+plugin">plugin XFire</a> qui va nous fournir en une commande le support des WebServices&nbsp;:</p> <pre class="bash code bash" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">$<span style="color: #000000; font-weight: bold;">&gt;</span> grails install-plugin xfire</div></li></ol></pre> <p>Ensuite, le démarrage d'un nouveau projet Grails est très rapide&nbsp;: <a href="http://www.grails.org/Quick+Start">Quick+Start</a>.</p> <h2>Création du WebService</h2> <p>Créez ensuite la structure du projet (ligne 1), déplacez vous dans le projet (ligne 2), et créez le service DegreeConverter (ligne 3).</p> <pre class="bash code bash" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">$<span style="color: #000000; font-weight: bold;">&gt;</span> grails create-app degreeconverter</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">$<span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #7a0874; font-weight: bold;">cd</span> degreeconverter</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">$<span style="color: #000000; font-weight: bold;">&gt;</span> grails create-service DegreeConverter</div></li></ol></pre> <p>Editez le contenu du fichier "grails-app/services/DegreeConverterService.groovy"&nbsp;:</p> <pre class="groovy code groovy" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000; font-weight: bold;">import</span> <span style="color: #a1a100;">javax.jws.WebParam</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">&nbsp;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000; font-weight: bold;">class</span> DegreeConverterService <span style="color: #66cc66;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">&nbsp;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">    <span style="color: #000000; font-weight: bold;">static</span> expose<span style="color: #66cc66;">=</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'xfire'</span><span style="color: #66cc66;">&#93;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">&nbsp;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #993333;">float</span> celsiusToFahrenheit<span style="color: #66cc66;">&#40;</span>@WebParam<span style="color: #66cc66;">&#40;</span>name<span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;tc&quot;</span>, header<span style="color: #66cc66;">=</span><span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span> <span style="color: #993333;">float</span> tc<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #993333;">float</span> tf <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#40;</span>9f / 5f<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">*</span> tc <span style="color: #66cc66;">+</span> 32f</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #66cc66;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">&nbsp;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #993333;">float</span> fahrenheitToCelsius<span style="color: #66cc66;">&#40;</span>@WebParam<span style="color: #66cc66;">&#40;</span>name<span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;tf&quot;</span>, header<span style="color: #66cc66;">=</span><span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span> <span style="color: #993333;">float</span> tf<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #993333;">float</span> tc <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#40;</span>5f / 9f<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">*</span> <span style="color: #66cc66;">&#40;</span>tf <span style="color: #66cc66;">-</span> 32f<span style="color: #66cc66;">&#41;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #66cc66;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #66cc66;">&#125;</span></div></li></ol></pre> <h2>Lancement</h2> <p>Lancez l'application avec le serveur embarqué</p> <pre class="bash code bash" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">$<span style="color: #000000; font-weight: bold;">&gt;</span> grails run-app</div></li></ol></pre> <p>Votre WebService est déployé et prêt à l'emploi. Vous pouvez consulter son WSDL à l'adresse <a href="http://localhost:8080/degreeconverter/services/degreeConverter?wsdl">http://localhost:8080/degreeconverter/services/degreeConverter?wsdl</a></p> <h2>Conclusion</h2> <p>Nous avons illustré dans ce billet qu'il est très facile de créer et de déployer un WebService avec Grails.</p>