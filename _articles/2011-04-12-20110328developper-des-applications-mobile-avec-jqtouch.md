---
ID: 431
post_title: >
  Développer des applications mobiles
  avec jQTouch
author: shadjiat
post_date: 2011-04-12 09:48:00
post_excerpt: "<p>jQTouch est un plugin jQuery, développé par David Kaneda en 2009 et est disponible en version 1.0 bêta 2 sous la licence MIT. Actuellement, il utilise la version 1.3.2 de jQuery. Il a été conçu spécialement pour iPhone et  iPod Touch, et se destine plus généralement à tout appareil disposant d'un navigateur webkit (Safari, Chrome).</p> <p>Dans cet article, je vais vous expliquer comment utiliser jQTouch pour développer une application Web pour mobile interactive et ayant toute l'apparence des applications natives iPhone ou Android.</p>"
layout: post
permalink: http://blog.zenika-offres.com/?p=431
published: true
slide_template:
  - ""
---
<p>jQTouch est un plugin jQuery, développé par David Kaneda en 2009 et est disponible en version 1.0 bêta 2 sous la licence MIT. Actuellement, il utilise la version 1.3.2 de jQuery. Il a été conçu spécialement pour iPhone et  iPod Touch, et se destine plus généralement à tout appareil disposant d'un navigateur webkit (Safari, Chrome).</p> <p>Dans cet article, je vais vous expliquer comment utiliser jQTouch pour développer une application Web pour mobile interactive et ayant toute l'apparence des applications natives iPhone ou Android.</p>
<!--more-->
<h2>Comment l'utiliser?</h2> <p><br />
jQTouch se présente sous la forme d'un fichier JavaScript compressé très léger (10k) ainsi que de feuilles de styles et d'images. Il comprend également des scripts dans le dossier extensions&nbsp;: « jqt.location » pour gérer la géolocalisation, « jqt.offline » pour le mode hors ligne, « jqt.floaty » permet de créer une barre d'outils flottante, et enfin « jqt.autotitles » pour modifier automatiquement le titre de la barre d'outils de la page demandée.</p> <p>Pour commencer, il faut déclarer les fichiers dans la balise <code>head</code> de notre page HTML&nbsp;:</p> <pre class="html code html" style="font-family:inherit"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">style</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text/css&quot;</span> <span style="color: #000066;">media</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;screen&quot;</span>&gt;</span>@import &quot;jqtouch/jqtouch.min.css&quot;;<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">style</span>&gt;</span> <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">style</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text/css&quot;</span> <span style="color: #000066;">media</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;screen&quot;</span>&gt;</span>@import &quot;jqtouch/themes/jqt/theme.min.css&quot;;<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">style</span>&gt;</span> &nbsp; <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">script</span> <span style="color: #000066;">src</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;jqtouch/jquery.1.3.2.min.js&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text/javascript&quot;</span> <span style="color: #000066;">charset</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;utf-8&quot;</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">script</span>&gt;</span> <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">script</span> <span style="color: #000066;">src</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;jqtouch/jqtouch.min.js&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;application/x-javascript&quot;</span> <span style="color: #000066;">charset</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;utf-8&quot;</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">script</span>&gt;</span></pre> <p>Vous remarquerez le fichier CSS theme.min. jQTouch utilise deux fichiers CSS, une feuille de style générale qui organise les écrans et gère les transitions et les orientations, et une deuxième pour le thème de l'application. Actuellement, il existe deux thèmes prédéfinis&nbsp;: apple et jqt. Le thème agit sur l'apparence de l'application&nbsp;: image de fond, couleurs, affichage des composants HTML... Par ailleurs, la librairie jQuery doit être déclarée avant jQTouch pour qu'il soit reconnu.</p> <p>Ensuite, les panels ou écrans de l'application doivent être organisés dans des balises <code>div</code>. Voici un exemple de page d'accueil&nbsp;:</p> <pre class="html code html" style="font-family:inherit"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;home&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;current&quot;</span>&gt;</span> 	<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;toolbar&quot;</span>&gt;</span> 		<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">h1</span>&gt;</span>My Panel<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">h1</span>&gt;</span> 		<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">a</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;button flip&quot;</span> <span style="color: #000066;">href</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;#next&quot;</span>&gt;</span>Next<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">a</span>&gt;</span> 	<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span> 	<span style="color: #808080; font-style: italic;">&lt;!-- contenu de la page --&gt;</span> <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span></pre> <p>Chaque écran est identifié par un id, ici « home » qu'on utilise pour naviguer entre les pages. Pour appliquer les styles de jQTouch, il suffit de les appeler dans l'attribut <code>class</code>. <code>toolbar</code> permet d'afficher une barre d'outils avec un titre et on peut y ajouter des boutons de navigation. Ainsi, le lien <code>Next</code> va chercher une balise HTML avec un id « next » et l'afficher sur l'écran. Pour afficher ce lien sous forme de bouton il suffit de spécifier <code>Button</code> dans l'attribut <code>class</code>. Il est également possible de spécifier une animation de transition entre les panels dans ce même attribut (ici <code>flip</code>), l'animation par défaut étant <code>slide</code>. jQTouch se charge également de mémoriser chaque panel ouvert dans un historique ce qui permet de revenir en arrière. On peut ainsi ajouter un lien avec la classe <code>back</code> et mettre l'attribut <code>href</code> à <code>#</code> pour naviguer à la page précédente. Par ailleurs, pour spécifier la 1ère page à afficher, on peut ajouter la classe <code>current</code> au div « home ». Sinon, jQTouch affichera le 1er panel défini.</p> <p>Ce qu'il faut retenir avec jQTouch c'est qu'il suffit d'une page HTML pour construire son application avec tous ses écrans et c'est le framework qui se charge ensuite de les organiser et les afficher (ou les cacher).</p> <h3>Configuration JQTouch</h3> <p>Juste après avoir déclaré jQTouch dans la balise <code>head</code>, il faut le configurer en l'initialisant par la fonction suivante&nbsp;:</p> <pre class="javascript code javascript" style="font-family:inherit"><span style="color: #003366; font-weight: bold;">var</span> jQT <span style="color: #339933;">=</span> <span style="color: #003366; font-weight: bold;">new</span> $.<span style="color: #660066;">jQTouch</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>         icon<span style="color: #339933;">:</span> <span style="color: #3366CC;">'jqtouch.png'</span><span style="color: #339933;">,</span>         startupScreen<span style="color: #339933;">:</span> <span style="color: #3366CC;">'jqt_startup.png'</span>         <span style="color: #006600; font-style: italic;">//...</span> <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>;</pre> <p>Lors de cette initialisation on peut spécifier des paramètres de configurations, par exemple l'icone ou l'écran de démarrage de l'application. La liste de tous ces p
aramètres se trouve sur ce <a href="http://code.google.com/p/jqtouch/wiki/InitOptions">site</a>. La variable jQT est ensuite utilisée pour appeler les fonctions du framework.</p> <h2>Démo</h2> <p><br />
Pour illustrer cette libraire, je vous propose une petite application de démonstration. Cette application, que j'ai brièvement citée dans mon article d'introduction, est un agenda. On peut y ajouter des événements (via un formulaire HTML5), les enregistrer sur le LocalStorage du navigateur, les afficher sur une carte avec Google Maps API et proposer de tracer un chemin vers son emplacement à partir de la localisation de l'utilisateur (API Geolocation).</p> <h3>Les panels</h3> <p>L'application se compose de 3 panels définis. La page d'accueil, un panel pour ajouter un évenement avec un formulaire à remplir, et une page contenant la carte Google. A chaque évènement ajouté, un panel sera crée dynamiquement en javascript avec les informations enregistrées.</p> <p>La page d'accueil affiche la liste des événements enregistrés en accédant au LocalStorage. Lors de sa première utilisation, la liste est bien entendu vide. La page contient une " toolbar " avec le titre et un bouton permettant d'accéder à la page <code>new</code> pour créer un nouvel événement.</p> <pre class="html code html" style="font-family:inherit"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;home&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;current&quot;</span>&gt;</span> 	<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;toolbar&quot;</span>&gt;</span> 		<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">h1</span>&gt;</span>My Agenda<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">h1</span>&gt;</span> 		<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">a</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;button slideup&quot;</span> <span style="color: #000066;">href</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;#new&quot;</span>&gt;</span>New Event<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">a</span>&gt;</span> 	<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span> 	<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">ul</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;events&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;rounded&quot;</span>&gt;</span> 	<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">ul</span>&gt;</span> <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span></pre> <p><img src="/wp-content/uploads/2015/07/.Capture_home_1_s.jpg" alt="Capture_home_1.JPG" style="display:block; margin:0 auto;" /></p> <p>JQTouch propose différents styles pour afficher des listes. Ici j'ai utilisé <code>rounded</code> qui affiche la liste dans un rectangle à bord rond pour plus de clarté. Il existe également <code>edgetoedge</code>, <code>metal</code> et <code>plastic</code> qui affichent la liste sur toute la largeur de l'écran avec différentes couleurs.</p> <p>La page d'ajout d'un événement se présente sous la forme d'un formulaire avec des champs à remplir. Pour créer un formulaire jQTouch, il suffit d'ajouter une liste à la balise <code>&lt;form&gt;</code>, chaque champ étant encadré par une balise <code>&lt;li&gt;</code>.</p> <p>J'ai choisi de mettre quelques nouveaux inputs d'HTML5&nbsp;: <code>date</code> et <code>email</code> ainsi que l'attribut <code>placeholder</code> qui affiche un texte explicatif sur le champ.</p> <pre class="html code html" style="font-family:inherit"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;new&quot;</span>&gt;</span> 	<span style="color: #808080; font-style: italic;">&lt;!-- toolbar --&gt;</span>    	<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">form</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;myform&quot;</span>&gt;</span>                  <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">ul</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;edit rounded&quot;</span>&gt;</span>                 	<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">li</span>&gt;</span>Event : <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">input</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;name&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;name&quot;</span> placeholder<span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;Enter the event's name&quot;</span><span style="color: #66cc66;">/</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">li</span>&gt;</span>                 	<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">li</span>&gt;</span>Start Date : <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">input</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;date&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;start&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;startD&quot;</span><span style="color: #66cc66;">/</span>&gt;</span> Start Time : <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">input</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;time&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;startT&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;startT&quot;</span><span style="color: #66cc66;">/</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">li</span>&gt;</span>     		        <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">li</span>&gt;</span>Finish Date : <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">input</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;date&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;end&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;endD&quot;</span> <span style="color: #66cc66;">/</span>&gt;</span> End Time : <span style="color: #009900;">&lt;<span style="colo
r: #000000; font-weight: bold;">input</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;time&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;endT&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;endT&quot;</span> <span style="color: #66cc66;">/</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">li</span>&gt;</span>     		        <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">li</span>&gt;</span>Location : <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">input</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;location&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;location&quot;</span> placeholder<span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;Enter the adress of your event&quot;</span> <span style="color: #66cc66;">/</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">li</span>&gt;</span>     		        <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">li</span>&gt;&lt;<span style="color: #000000; font-weight: bold;">select</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;daily&quot;</span>&gt;</span>                      		<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">option</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;none&quot;</span>&gt;</span>None<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">option</span>&gt;</span> 			        <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">option</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;daily&quot;</span>&gt;</span>Daily<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">option</span>&gt;</span> 			        <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">option</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;weekly&quot;</span>&gt;</span>Weekly<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">option</span>&gt;</span> 			        <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">option</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;monthly&quot;</span>&gt;</span>Monthly<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">option</span>&gt;</span>                     	<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">select</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">li</span>&gt;</span>     		        <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">li</span>&gt;</span>Alarm <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">span</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;toggle&quot;</span>&gt;&lt;<span style="color: #000000; font-weight: bold;">input</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;checkbox&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;alarm&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;alarm&quot;</span><span style="color: #66cc66;">/</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">span</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">li</span>&gt;</span>     		        <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">li</span>&gt;</span>Email notification: <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">input</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;email&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;email&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;email&quot;</span> placeholder<span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;Enter your email adress for notification&quot;</span><span style="color: #66cc66;">/</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">li</span>&gt;</span>                  <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">ul</span>&gt;</span>                  <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">align</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;center&quot;</span>&gt;</span>                         <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">a</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;saveButton&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;whiteButton&quot;</span> <span style="color: #000066;">href</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;home&quot;</span>&gt;</span>Save Event<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">a</span>&gt;</span>                  <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span> 	<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">form</span>&gt;</span> <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span></pre> <p>JQTouch fourni des styles pour les champs de type <code>select</code>, <code>radio</code>, ou <code>checkbox</code> avec notamment la classe <code>toggle</code> qui permet d'afficher un interupteur ON/OFF. Cependant, les types <code>date</code> et <code>time</code> n'ont pas de styles ou d'interface associés avec jQTouch. Tout dépend donc de l'implémentation du navigateur (Opéra est le seul à afficher un calendrier mais n'est pas totalement compatible avec les styles du framework).</p> <p><img src="/wp-content/uploads/2015/07/.Capture_new_1_s.jpg" alt="Capture_new_1.JPG" style="display:block; margin:0 auto;" /></p> <p>Ensuite, je rajoute un dernier écran pour la carte Google sur laquelle sera affiché chaque évenement. Petite remarque: pour afficher la carte en plein écran il faut mettre <code>style="width:100%; height:100%;"</code> sur le div du panel et sur celui de
 la carte (en mettant height à 85% pour voir le bouton "Go to my Event). Sinon, elle ne s'affichera pas.</p> <pre class="html code html" style="font-family:inherit"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;map&quot;</span> <span style="color: #000066;">style</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;width:100%; height:100%;&quot;</span>&gt;</span>          <span style="color: #808080; font-style: italic;">&lt;!-- Toolbar --&gt;</span>    	 <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">div</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;map_canvas&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;fullscreen&quot;</span> <span style="color: #000066;">style</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;width:100%; height:85%;&quot;</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span>    	 <span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">a</span> <span style="color: #000066;">href</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;#&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;traceButton&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;whiteButton&quot;</span> <span style="color: #000066;">style</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;margin: 10px&quot;</span>&gt;</span>Go to my Event<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">a</span>&gt;</span> <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">div</span>&gt;</span></pre> <p>Le boutton "Go to my Event" sera utilisé pour tracer un chemin vers l'emplacement de l'évènement à partir de la localisation de l'utilisateur. Je précise que pour utiliser l'API Google Maps, il faut d'abord ajouter cette ligne dans la balise <code>head</code> de la page HTML:</p> <pre class="html code html" style="font-family:inherit"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">script</span> <span style="color: #000066;">src</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;http://maps.google.com/maps/api/js?sensor=true&quot;</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">script</span>&gt;</span></pre> <p>A présent que nous avons notre page HTML, passons au javascript qui va nous permettre de gérer les événements et de dynamiser notre application. Nous allons tout d'abord commencer par configurer jQTouch.</p> <pre class="javascript code javascript" style="font-family:inherit"><span style="color: #003366; font-weight: bold;">var</span> jQT <span style="color: #339933;">=</span> <span style="color: #003366; font-weight: bold;">new</span> $.<span style="color: #660066;">jQTouch</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>     icon<span style="color: #339933;">:</span> <span style="color: #3366CC;">'jqtouch.png'</span><span style="color: #339933;">,</span>     addGlossToIcon<span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #339933;">,</span>     startupScreen<span style="color: #339933;">:</span> <span style="color: #3366CC;">'jqt_startup.png'</span><span style="color: #339933;">,</span>     statusBar<span style="color: #339933;">:</span> <span style="color: #3366CC;">'black'</span><span style="color: #339933;">,</span>     useAnimations<span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #339933;">,</span>     fullScreen<span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">true</span> <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>;</pre> <p>Ensuite, pour gérer les évènements liés au "toucher", le framework fourni des fonctions raccourcis pour éviter d'utiliser <code>bind</code>. Par exemple, pour un 'tap event' (qui remplace le "click" standard), on utilise la fonction <code>tap</code> sur l'élément&nbsp;:</p> <pre class="javascript code javascript" style="font-family:inherit">$<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#saveButton&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">tap</span><span style="color: #009900;">&#40;</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>e<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span> 	 <span style="color: #006600; font-style: italic;">//sauvegarde...</span> <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>;</pre> <h3>Sauvegarde des évènements</h3> <p>Pour sauvegarder les données, nous allons utiliser le LocalStorage du navigateur. Le localStorage est en fait une table (clé, valeur). Pour simplifier, la clé sera le nom de l'événement ajouté, et dans le champ « valeur » seront enregistrées les informations entrées sur le formulaire séparées par des points-virgules.</p> <pre class="javascript code javascript" style="font-family:inherit"><span style="color: #003366; font-weight: bold;">function</span> saveLocalStorage<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span> 	<span style="color: #003366; font-weight: bold;">var</span> key <span style="color: #339933;">=</span> nameValue; 	<span style="color: #003366; font-weight: bold;">var</span> value <span style="color: #339933;">=</span> startDValue <span style="color: #339933;">+</span> <span style="color: #3366CC;">&quot;;&quot;</span> <span style="color: #339933;">+</span> startTValue <span style="color: #339933;">+</span> <span style="color: #3366CC;">&quot;;&quot;</span> <span style="color: #339933;">+</span> endDValue  <span style="color: #339933;">+</span> <span style="color: #3366CC;">&quot;;&quot;</span> <span style="color: #339933;">+</span> endTValue <span style="color: #339933;">+</span> <span style="color: #3366CC;">&quot;;&quot;</span> <span style="color: #339933;">+</span> addressValue <span style="color: #339933;">+</span> <span style="color: #3366CC;">&quot;;&quot;</span> <span style="color: #339933;">+</span> dailyValue <span style="color: #339933;">+</span> <span style="color: #3366CC;">&quot;;&quot;</span> <span style="color: #339933;">+</span> alarmValue <span style="color: #339933;">+</span> <span style="color: #3366CC;">&quot;;&quot;</span> <span style="color: #339933;">+</span> emailValue; 	<span style="color: #000066; font-weight: bold;">if</span><span style="color: #009900;">&#40;</span>key<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span> 	    <span style="color: #000066; font-weight: bold;">if</span><span style="color: #009900;">&#40;</span>window.<span style="color: #660066;">localStorage</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span> 		window.<span style="color: #660066;">localStorage</span>.<span style="color: #660066;">setItem</span><span style="color: #009900;">&#40;</span>key<span style="color: #339933;">,</span> value<span style="color: #009900;">&#41;</span>;             <span style="color: #009900;">&#125;</span> 	<span style="color: #009900;">&#125;</span> <span style="color: #009900;">&#125;</span></pre> <p>L’évènement est ensuite ajouté à la l
iste de la page d'accueil et un panel est crée pour afficher ses informations et contiendra un lien pour accéder au panel de la carte</p> <p><img src="/wp-content/uploads/2015/07/.Capture_home_2_s.jpg" alt="Capture_home_2.JPG" /><img src="/wp-content/uploads/2015/07/.Capture_event_s.jpg" alt="Capture_event.JPG" /></p> <p>Pour en savoir plus sur le localStorage je vous invite à regarder mon billet sur <a href="/index.php?post/2011/02/17/Html5%3A-le-mode-Offline">le mode hors-ligne</a>.</p> <h3>Géolocalisation</h3> <p>A présent, il ne reste plus qu'à afficher l'évènement sur une carte. Pour cela, j'utiliser le service <a href="http://code.google.com/apis/maps/documentation/javascript/services.html#Geocoding">Geocoding</a> de <a href="http://code.google.com/apis/maps/documentation/javascript/">Google Maps Javascript API</a> pour localiser l'évènement à l'aide de son adresse entrée avec le formulaire.</p> <p><img src="/wp-content/uploads/2015/07/.Capture_map_1_s.jpg" alt="Capture_map_1.JPG" style="display:block; margin:0 auto;" /></p> <p>Pour ce qui est de la localisation de l'utilisateur j'utiliser l'API Geolocation d'HTML5. Cette fonctionnalité est implémentée dans tous les navigateurs récents et plus particulièrement sur les navigateurs par défaut des derniers smartphones (Android , iphone, ipod Touch et BlackBerry 6). Ensuite nous j'utiliser le service "<a href="http://code.google.com/apis/maps/documentation/javascript/services.html#Directions">Direction</a>" de l'API Google Maps pour tracer un chemin entre la position de l'utilisateur et celle de l'évènement&nbsp;: et voici le résultat en image&nbsp;:</p> <p><img src="/wp-content/uploads/2015/07/.Capture_map_2_s.jpg" alt="Capture_map_2.JPG" style="display:block; margin:0 auto;" /></p> <p>Vous trouverez plus d'explications sur l'API et l'utilisation de Google Maps dans mon billet sur la <a href="/index.php?post/2011/02/10/HTML5-API-Geolocation">géolocalisation d'HTML5</a>.</p> <p>Vous trouverez également le code complet de l'application en ligne sur le <a href="https://github.com/Zenika/Blogs">Github de Zenika</a>.</p> <h2>Critique</h2> <p><br />
J'ai testé cette application sur iPhone, Android (v2.2), iPad et même la dernière Galaxy Tab. En ce qui concerne la performance et l'interactivité, le touché est assez précis (au niveau du 'tap'), les transitions sont cependant assez lentes et très instables sur Android. D'un point de vue richesse, le framework reste assez basique et manque en composants (au niveau des formulaires, boutons, organisation des panels), il manque également la gestion du stockage local, et les thèmes définis sont insuffisants et difficilement personnalisables. Par ailleurs, jQTouch n'est pas bien adapté aux tablettes de grande résolution comme l'iPad ou la Galaxy Tab. Le framework reste quand même relativement performant, en particulier sur iphone, très simple d'utilisation et s'ajoute facilement à une page HTML proprement construite.</p> <h3>Ressources</h3> <p><br />
Pour en savoir plus sur JQTouch, vous pouvez vous documenter à l'aide des ressources suivantes&nbsp;:</p> <ul> <li>Exemples et démos de <a href="http://jqtouch.com/">jQTouch</a> fournis avec le framework.</li> <li>Livres&nbsp;: « <a href="http://ofps.oreilly.com/titles/9780596805784/">Building iPhone Apps with HTML, CSS, and JavaScript</a> » et « <a href="http://ofps.oreilly.com/titles/9781449383268/">Building Android Apps with HTML, CSS, and JavaScript</a> », par Jonathan Stark.</li> </ul> <p><br /></p> <p>Les jours prochains, je poursuiverai ma série sur les frameworks mobile par un billet consacré à jQuery Mobile, la "version" mobile officielle de jQuery.</p> <h4>A suivre …</h4>