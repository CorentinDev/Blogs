---
ID: 88
post_title: 'Au coeur du JDK : la classe Scanner'
author: ocroisier
post_date: 2010-03-03 15:59:00
post_excerpt: |
  <p>Une classe injustement méconnue du JDK est Scanner (<code>java.util.Scanner</code>).<br />
  Elle offre pourtant des fonctionnalités très intéressantes pour parser des chaînes de caractères, et en extraire et convertir les composants.</p> <p>Un Scanner peut se brancher sur à peu près n'importe quelle source&nbsp;: <code>InputStream</code>, <code>Readable</code> (et donc <code>Reader</code>), <code>File</code>... et bien sûr une simple <code>String</code>. Ensuite, deux options s'offrent à vous&nbsp;: utiliser les méthodes de type <code>hasNext...()</code> / <code>next...()</code>, ou alors les méthodes de type <code>find...()</code> / <code>match()</code> / <code>group()</code>.</p> <p>Dans ce billet, nous verrons comment utiliser ces deux jeux d'instructions.</p>
layout: post
permalink: http://blog.zenika-offres.com/?p=88
published: true
---
<p>Une classe injustement méconnue du JDK est Scanner (<code>java.util.Scanner</code>).<br />
Elle offre pourtant des fonctionnalités très intéressantes pour parser des chaînes de caractères, et en extraire et convertir les composants.</p> <p>Un Scanner peut se brancher sur à peu près n'importe quelle source&nbsp;: <code>InputStream</code>, <code>Readable</code> (et donc <code>Reader</code>), <code>File</code>... et bien sûr une simple <code>String</code>. Ensuite, deux options s'offrent à vous&nbsp;: utiliser les méthodes de type <code>hasNext...()</code> / <code>next...()</code>, ou alors les méthodes de type <code>find...()</code> / <code>match()</code> / <code>group()</code>.</p> <p>Dans ce billet, nous verrons comment utiliser ces deux jeux d'instructions.</p>
<!--more-->
<h4>Première méthode&nbsp;: hasNext() / next()</h4> <p>Voyons une première façon d'utiliser un Scanner pour lire des flux de texte.</p> <p>Elle se décompose en deux étapes&nbsp;:</p> <ul> <li>Premièrement, découper la chaîne de caractères en <em>tokens</em> grâce à un délimiteur&nbsp;; il s'agit par défaut d'un caractère "blanc" (espace, tabulation, retour à la ligne...), mais il est évidemment possible de fournir sa propre expression via la méthode <code>useDelimiter(expression)</code>.</li> <li>Ensuite, utiliser les méthodes de type <code>hasNext...()</code> et <code>next...()</code> pour parcourir, récupérer et convertir ces tokens.</li> </ul> <p>Les méthodes de type <code>hasNext...()</code> (<code>hasNextInt()</code>, <code>hasNextFloat()</code>...) fonctionnent sur le même principe qu'un <code>Iterator</code>, et indiquent si le prochain token existe et s'il est bien du type spécifié. Une fois cette vérification effectuée, les méthodes de la forme <code>next...()</code> (<code>nextInt()</code>, <code>nextFloat()</code>...) permettent de récupérer ledit token, directement converti dans le type adéquat.<br />
A noter qu'existent également les méthodes simples <code>hasNext()</code> et <code>next()</code>, qui permettent de savoir s'il existe un token (de n'importe quel type) et de le récupérer sous forme de String.</p> <p>A l'aide de ces méthodes, il est très facile de parser une chaîne dont vous maîtrisez parfaitement le format, par exemple un fichier <code>.csv</code>&nbsp;:</p> <pre class="java code java" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">String</span> s = </div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #888888;">&quot;Dalton;Joe;1.4<span style="color: #000099; font-weight: bold;">n</span>&quot;</span> + </div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #888888;">&quot;Dalton;Jack;1.6<span style="color: #000099; font-weight: bold;">n</span>&quot;</span> +</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #888888;">&quot;Dalton;William;1.8<span style="color: #000099; font-weight: bold;">n</span>&quot;</span> +</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #888888;">&quot;Dalton;Averell;2.0&quot;</span>; </div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">Scanner scan = <span style="color: #7F0055; font-weight: bold;">new</span> Scanner<span style="color: #000000;">&#40;</span>s<span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">scan.<span style="color: #000000;">useDelimiter</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;;|<span style="color: #000099; font-weight: bold;">n</span>&quot;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">scan.<span style="color: #000000;">useLocale</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">Locale</span>.<span style="color: #000000;">US</span><span style="color: #000000;">&#41;</span>; <span style="color: #808080; font-style: italic;">// Pour les floats</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">&nbsp;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #7F0055;font-weight: bold;">while</span><span style="color: #000000;">&#40;</span>scan.<span style="color: #000000;">hasNextLine</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">System</span>.<span style="color: #000000;">out</span>.<span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;%2$s %1$s : %3$.1f m %n&quot;</span>, scan.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>, scan.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>, scan.<span style="color: #000000;">nextFloat</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">&#125;</span></div></li></ol></pre> <pre> Joe Dalton : 1,4 m Jack Dalton : 1,6 m William Dalton : 1,8 m Averell Dalton : 2,0 m </pre> <p>Si au contraire le format de la chaîne vous est inconnu, par exemple si elle est saisie par l'utilisateur, il est plus prudent de recourir au pattern suivant, pour éviter les erreurs de conversion de type (<code>InputMismatchException</code>)&nbsp;:</p> <pre class="java code java" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">Scanner scan = <span style="color: #7F0055; font-weight: bold;">new</span> Scanner<span style="color: #000000;">&#40;</span><span style="color: #000000;">System</span>.<span style="color: #000000;">in</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">System</span>.<span style="color: #000000;">out</span>.<span style="color: #000000;">println</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Entrez un nombre entier à incrémenter :&quot;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #808080; font-style: italic;">// Existe-t-il un token ?</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #7F0055;font-weight: bold;">while</span><span style="color: #000000;">&#40;</span>scan.<span style="color: #000000;">hasNext</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #808080; font-style: italic;">// Est-ce un int ? On l'incrémente</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #7F0055;font-weight: bold;">if</span> <span style="color: #000000;">&#40;</span>scan.<span style="color: #000000;">hasNextInt</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #7F0055; font-weight: bold;">int</span> nb = scan.<span style="color: #000000;">nextInt</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #000000;">System</span>.<span style="color: #000000;">out</span>.<span style="color: #000000;">println</span><span style="color: #000000;">&#40;</span>nb + <span style="color: #888888;">&quot; +1 = &quo
t;</span> + ++nb<span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span> </div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #808080; font-style: italic;">// Ce n'est pas un int, affichage d'un message d'erreur.</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #7F0055;font-weight: bold;">else</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #000000;">System</span>.<span style="color: #000000;">out</span>.<span style="color: #000000;">println</span><span style="color: #000000;">&#40;</span>scan.<span style="color: #000000;">next</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> + <span style="color: #888888;">&quot; n'est pas un nombre.&quot;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">scan.<span style="color: #000000;">close</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li></ol></pre> <p>Notez que la classe Scanner simplifie beaucoup votre code, car vous n'avez plus à convertir manuellement les tokens ni à gérer des exceptions de bas niveau.</p> <p>A titre de comparaison, voici le code effectuant le même traitement sans utiliser la classe Scanner&nbsp;:</p> <pre class="java code java" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">BufferedReader</span> reader = <span style="color: #7F0055; font-weight: bold;">null</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">String</span> line = <span style="color: #7F0055; font-weight: bold;">null</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #7F0055; font-weight: bold;">try</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	reader = <span style="color: #7F0055; font-weight: bold;">new</span> <span style="color: #000000;">BufferedReader</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">new</span> <span style="color: #000000;">InputStreamReader</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">System</span>.<span style="color: #000000;">in</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #7F0055;font-weight: bold;">while</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">&#40;</span>line=reader.<span style="color: #000000;">readLine</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">!</span>= <span style="color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #7F0055; font-weight: bold;">try</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			<span style="color: #000000;">System</span>.<span style="color: #000000;">out</span>.<span style="color: #000000;">println</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">Integer</span>.<span style="color: #000000;">parseInt</span><span style="color: #000000;">&#40;</span>line<span style="color: #000000;">&#41;</span>+<span style="color: #cc66cc;">1</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">catch</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">NumberFormatException</span> e<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			<span style="color: #000000;">System</span>.<span style="color: #000000;">out</span>.<span style="color: #000000;">println</span><span style="color: #000000;">&#40;</span>line + <span style="color: #888888;">&quot; n'est pas un nombre.&quot;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">catch</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">IOException</span> e<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	e.<span style="color: #000000;">printStackTrace</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">finally</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #7F0055;font-weight: bold;">if</span> <span style="color: #000000;">&#40;</span>reader<span style="color: #000000;">!</span>=<span style=
"color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #7F0055; font-weight: bold;">try</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			reader.<span style="color: #000000;">close</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">catch</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">IOException</span> e<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">&#125;</span></div></li></ol></pre> <p>Même pour une simple lecture de fichier ligne par ligne, Scanner remplace avantageusement le traditionnel <code>BufferedReader</code>&nbsp;:</p> <pre class="java code java" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">static</span> <span style="color: #7F0055; font-weight: bold;">void</span> readFileWithBufferedReader<span style="color: #000000;">&#40;</span><span style="color: #000000;">String</span> fileName<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">BufferedReader</span> reader = <span style="color: #7F0055; font-weight: bold;">null</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #7F0055; font-weight: bold;">try</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		reader = <span style="color: #7F0055; font-weight: bold;">new</span> <span style="color: #000000;">BufferedReader</span><span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">new</span> <span style="color: #000000;">FileReader</span><span style="color: #000000;">&#40;</span>fileName<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			<span style="color: #000000;">String</span> line = <span style="color: #7F0055; font-weight: bold;">null</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			<span style="color: #7F0055;font-weight: bold;">while</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">&#40;</span>line=reader.<span style="color: #000000;">readLine</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">!</span>=<span style="color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">				<span style="color: #000000;">System</span>.<span style="color: #000000;">out</span>.<span style="color: #000000;">println</span><span style="color: #000000;">&#40;</span>line<span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">catch</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">FileNotFoundException</span> e<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		e.<span style="color: #000000;">printStackTrace</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">catch</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">IOException</span> e<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		e.<span style="color: #000000;">printStackTrace</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">finally</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #7F0055;font-weight: bold;">if</span> <span style="color: #000000;">&#40;</span>reader<span style="color: #000000;">!</span>=<span style="color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			<span style="color: #7F0055; font-weight: bold;">try</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">				reader.<span style="color: #000000;">close</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: n
ormal; margin:0; padding:0; background:inherit;">			<span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">catch</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">IOException</span> e<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">&nbsp;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #7F0055; font-weight: bold;">public</span> <span style="color: #7F0055; font-weight: bold;">static</span> <span style="color: #7F0055; font-weight: bold;">void</span> readFileWithScanner<span style="color: #000000;">&#40;</span><span style="color: #000000;">String</span> fileName<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	Scanner scan = <span style="color: #7F0055; font-weight: bold;">null</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #7F0055; font-weight: bold;">try</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		scan = <span style="color: #7F0055; font-weight: bold;">new</span> Scanner<span style="color: #000000;">&#40;</span><span style="color: #7F0055; font-weight: bold;">new</span> <span style="color: #000000;">File</span><span style="color: #000000;">&#40;</span>fileName<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #7F0055;font-weight: bold;">while</span><span style="color: #000000;">&#40;</span>scan.<span style="color: #000000;">hasNextLine</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">			<span style="color: #000000;">System</span>.<span style="color: #000000;">out</span>.<span style="color: #000000;">println</span><span style="color: #000000;">&#40;</span>scan.<span style="color: #000000;">nextLine</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">catch</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">FileNotFoundException</span> e<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		e.<span style="color: #000000;">printStackTrace</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span> <span style="color: #7F0055; font-weight: bold;">finally</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">		<span style="color: #7F0055;font-weight: bold;">if</span> <span style="color: #000000;">&#40;</span>scan<span style="color: #000000;">!</span>=<span style="color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span> scan.<span style="color: #000000;">close</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">&#125;</span></div></li></ol></pre> <h4>Deuxième méthode&nbsp;: find() / match() / group()</h4> <p>La seconde utilisation possible d'un Scanner est la recherche d'éléments précis dans un texte, en s'appuyant sur des expressions régulières .</p> <p>Cette fois encore, c'est très simple&nbsp;:</p> <ul> <li>Premièrement, il faut définir le format attendu de la ligne, à l'aide d'une expression régulière compatible avec la classe <code>java.util.regex.Pattern</code>.</li> <li>Ensuite, il n'y a plus qu'à récupérer les informations qui nous intéressent en fonction de leur index, grâce à la méthode <code>group(index)</code>.</li> </ul> <p>Par exemple, vous possédez un fichier répertoriant les plus grands délinquants du Far West, et vous souhaitez en extraire les nom, prénom et taille de ces individus.</p> <pre> Le bandit Joe Dalton mesure 1.40m. Le bandit Jack Dalton mesure 1.60m. Le bandit William Dalton mesure 1.80m. Le bandit Averell Dalton mesure 2m. </pre> <p>Chaque ligne répond visiblement au pattern suivant&nbsp;:</p> <pre> Le bandit (\w+) (\w+) mesure (\d+(\.\d+)?)m\. </pre> <p>Notez que le prénom est la première expression capturée (index 1), le nom la seconde (index 2), et la taille la troisième (index 3).</p> <p>Utilisons Scanner pour extraire ces informations du fichier&nbsp;:</p> <pre class="java code java" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">Pattern pattern = Pattern.<span style="color: #000000;">compile</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;Le bandit (<span style="color: #000099; font-weight: bold;">\</span>w+) (<span style="color: #000099; font-weight: bold;">\</span>w+) mesure (<span style="color: #000099; font-weight: bold;">\</span>d+(<span style="color: #000099; font-weight: bold;">\</span>.<span style="color: #000099; font-weight: bold;">\</span>d+)?)m<span style="color: #00
0099; font-weight: bold;">\</span>.&quot;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">Scanner scan = <span style="color: #7F0055; font-weight: bold;">new</span> Scanner<span style="color: #000000;">&#40;</span>daltons<span style="color: #000000;">&#41;</span>; <span style="color: #808080; font-style: italic;">// Fichier, String...</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #7F0055;font-weight: bold;">while</span> <span style="color: #000000;">&#40;</span>scan.<span style="color: #000000;">findInLine</span><span style="color: #000000;">&#40;</span>pattern<span style="color: #000000;">&#41;</span> <span style="color: #000000;">!</span>= <span style="color: #7F0055; font-weight: bold;">null</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	MatchResult match = scan.<span style="color: #000000;">match</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #000000;">System</span>.<span style="color: #000000;">out</span>.<span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #888888;">&quot;%s, %s : %.2fm%n&quot;</span>, match.<span style="color: #000000;">group</span><span style="color: #000000;">&#40;</span><span style="color: #cc66cc;">2</span><span style="color: #000000;">&#41;</span>, match.<span style="color: #000000;">group</span><span style="color: #000000;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #000000;">&#41;</span>, <span style="color: #000000;">Float</span>.<span style="color: #000000;">valueOf</span><span style="color: #000000;">&#40;</span>match.<span style="color: #000000;">group</span><span style="color: #000000;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;</div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">	<span style="color: #7F0055;font-weight: bold;">if</span> <span style="color: #000000;">&#40;</span>scan.<span style="color: #000000;">hasNextLine</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> scan.<span style="color: #000000;">nextLine</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; <span style="color: #808080; font-style: italic;">// Avance à la ligne suivante, si elle existe.</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #000000;">&#125;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;">scan.<span style="color: #000000;">close</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;</div></li></ol></pre> <pre> Dalton, Joe : 1,40m Dalton, Jack : 1,60m Dalton, William : 1,80m Dalton, Averell : 2,00m </pre> <h4>Conclusion</h4> <p>La classe Scanner, introduite avec Java 5.0, est injustement méconnue. Elle offre pourtant des fonctionnalités intéressantes, qui simplifient la lecture et l'interprétation de texte pouvant provenir de sources variées.</p> <p>J'espère que ce billet vous aura donné envie de l'utiliser&nbsp;!</p>