---
ID: 341
post_title: zPilot au DevFest Nantes!
author: preliquet
post_date: 2013-11-20 11:00:00
post_excerpt: |
  <p>Le 8 Novembre dernier a eu lieu la conférence <a href="http://devfest.gdgnantes.com/" hreflang="fr" title="DevFest à Nantes">DevFest à Nantes</a>. Cette journée de conférences, organisée par le <a href="http://www.gdgnantes.com/" hreflang="fr" title="GDG Nantes">Google Developers Group Nantes</a>, a accueilli plus de 300 personnes dans les locaux d'Epitech. "Les DevFests sont des évènements communautaires de grande envergure, ayant lieu à travers le monde, suivant la tradition des Google Developer Days et organisés par des groupes d’utilisateurs locaux".</p> <p>Zenika était sponsor de l’évènement et avait pour l’occasion préparé une démonstration, nommée zPilot, permettant d’animer les inter-conférences des visiteurs.</p> <p><img src="/public/Billet_433/.IMG_20131108_181232_m.jpg" alt="zPilot-wordle" style="display:block; margin:0 auto;" title="zPilot-wordle" /></p>
layout: post
permalink: http://blog.zenika-offres.com/?p=341
published: true
---
<p>Le 8 Novembre dernier a eu lieu la conférence <a href="http://devfest.gdgnantes.com/" hreflang="fr" title="DevFest à Nantes">DevFest à Nantes</a>. Cette journée de conférences, organisée par le <a href="http://www.gdgnantes.com/" hreflang="fr" title="GDG Nantes">Google Developers Group Nantes</a>, a accueilli plus de 300 personnes dans les locaux d'Epitech. "Les DevFests sont des évènements communautaires de grande envergure, ayant lieu à travers le monde, suivant la tradition des Google Developer Days et organisés par des groupes d’utilisateurs locaux".</p> <p>Zenika était sponsor de l’évènement et avait pour l’occasion préparé une démonstration, nommée zPilot, permettant d’animer les inter-conférences des visiteurs.</p> <p><img src="/wp-content/uploads/2015/07/.IMG_20131108_181232_m.jpg" alt="zPilot-wordle" style="display:block; margin:0 auto;" title="zPilot-wordle" /></p>
<!--more-->
<h4>zPilot</h4> <p><img src="/wp-content/uploads/2015/07/zpilot-game-small.png" alt="zPilot - le jeu" style="float:right; margin: 0 0 1em 1em;" title="zPilot - le jeu" /></p> <p>zPilot est un jeu multi-joueur, tournant dans votre navigateur web, proposant l’analyse en temps réel des parties jouées. Cette analyse est réalisée en mixant de nombreuses technologies, que l'on retrouve de plus en plus sur nos projets&nbsp;: AngularJS, Couchbase, ElasticSearch...</p> <p>Pour cette démonstration, nous avons utilisé le jeu HTML5 <a href="http://jfd.github.io/wpilot/" hreflang="en" title="WPilot by Johan Dahlberg">Wpilot</a> développé par Johan Dahlberg sous licence open-source. Le principe est simple, le joueur est au commande d'un vaisseau spatial, se déplaçant en apesanteur, et doit combattre les autres joueurs sur différentes cartes de jeu.</p> <h5>Enhanced by Zenika</h5> <p>Pour l'occasion, certaines évolutions ont été apportées&nbsp;:</p> <p><img src="/wp-content/uploads/2015/07/joypad_small.png" alt="Un gamepad pour les mobiles" style="float:left; margin: 0 1em 1em 0;" title="Un gamepad pour les mobiles" /></p> <p><br />
<br />
L'ajout d'un gamepad rendant le jeu accessible pour tous les joueurs mobiles.</p> <p><a href="/wp-content/uploads/2015/07/zpilot-hub.jpg" title="zPilot Hub"><img src="/wp-content/uploads/2015/07/.zpilot-hub_t.jpg" alt="zPilot Hub" style="float:right; margin: 0 0 1em 1em;" title="zPilot Hub" /></a></p> <p><br />
<br />
Une application permettant de choisir un serveur parmi l'un des huit mis à disposition lors de la conférence.</p> <p><br />
<br />
<br /></p> <p>La gestion de nombreux évènements rendant ainsi le jeu plus ludique et plus fun:</p> <ul> <li>Distinction des différentes façons de mourir: crash contre un mur, crash contre un autre joueur, tir réussi...</li> <li>Connexion / Déconnexion des joueurs</li> <li>Ensemble des tirs réalisés par les joueurs</li> <li>Type de joueur (étudiant, freelance ou entreprise)</li> </ul> <h5>Un tableau de bord dynamique</h5> <p>De l’analyse de ces différents évènements, zPilot génère un tableau de bord couvrant l’historique du jeu sur une période donnée. zPilot permet ainsi d’accéder à différentes informations&nbsp;:</p> <ul> <li>Liste des serveurs utilisés</li> <li>Liste des joueurs ayant joués sur la période considérée</li> <li>Statistiques sur le nombre de morts, nombre de suicides, temps joué cumulé ...</li> <li>Classements des différents joueurs&nbsp;: “Les plus meurtriers”, “Les plus morts”, “Les plus suicidaires”</li> <li>Le game feed&nbsp;: permettant d’accéder en temps réel aux derniers évènements du jeu</li> </ul> <p>Ces statistiques sont, par la suite, présentées sur un tableau de bord responsive permettant ainsi l’affichage sur les mobiles pour les joueurs préférant ce biais.</p> <p>Il est possible de sélectionner un serveur et / ou un joueur particulier pour accéder à ses statistiques personnelles.</p> <p><a href="/wp-content/uploads/2015/07/results.png" title="Résultats de la journée"><img src="/wp-content/uploads/2015/07/.results_m.jpg" alt="Résultats de la journée" style="display:block; margin:0 auto;" title="Résultats de la journée" /></a></p> <h4>Un peu de technique</h4> <h5>Un déploiement continu</h5> <p>La première étape de ce prototype était l’automatisation de la chaîne de déploiement et cela pour trois raisons&nbsp;:</p> <ol> <li>Faciliter la mise en production</li> <li>Démontrer qu’aujourd’hui le<a href="/index.php?post/2013/09/27/Retour-sur-le-ptit-dej-AngularJS" hreflang="fr" title="Le javascript s&#039;industrialise"> javascript s’industrialise</a> aussi bien (ou presque) que les autres langages.</li> <li>Utiliser <a href="https://developers.google.com/appengine/" hreflang="en" title="Google AppEngine">AppEngine</a>, le PAAS de Google et <a href="https://cloud.google.com/products/compute-engine" hreflang="en" title="Google Compute Engine">Compute Engine</a>, le IAAS de Google, qui sont forcément d'actualité lorsqu'on est à un DevFest.</li> </ol> <p>L'objectif est simple, le développeur ne s'occupe que du développement, et à chaque commit, les applications sont redéployées automatiquement.</p> <p>Et puisqu'un schéma vaut mieux qu'un long discours, voici la chaîne de déploiement&nbsp;:</p> <p><a href="/wp-content/uploads/2015/07/deployment.png" title="Un déploiement automatisé"><img src="/wp-content/uploads/2015/07/.deployment_m.jpg" alt="Un déploiement automatisé" style="display:block; margin:0 auto;" title="Un déploiement automatisé" /></a></p> <h5>Une architecture web&nbsp;: Le jeu et ses données</h5> <p>zPilot était ainsi l’occasion de mêler des technologies récentes afin de proposer un jeu développé pour le web avec les technologies du web.</p> <p>Le jeu zPilot est réalisé en HTML5 et tous les clients communiquent avec le serveur de jeu via les websocket. Le serveur zPilot produit ainsi des évènements qui sont envoyés et persistés dans la base NoSQL Couchbase. Ici seules les opérations GET et PUT sont utilisées. Tous les documents Coucbbase sont alors répliqués vers ElasticSearch via le <a href="https://github.com/couchbaselabs/elasticsearch-transport-couchbase" hreflang="en" title="elasticsearch-transport-couchbase">plugin transport de couchbase</a>.</p> <p>ElasticSearch indexe toutes les données, ce qui permet de les restituer de différentes façons sur notre interface web de monitoring, développée en AngularJS avec Bootstrap 3 et <a href="http://d3js.org/" hreflang="en" title="Data Driven Documents">D3.js</a> / <a href="http://nvd3.org/" hreflang="en" title="NVD3.js">NVD3.js</a> pour les graphes.</p> <p>Le schéma ci-dessous présente l'ensemble de l'architecture mise en place&nbsp;:</p> <p><a href="/wp-content/uploads/2015/07/archi.png" title="Une architecture pour le web par le web"><img src="/wp-content/uploads/2015/07/.archi_m.jpg" alt="Une architecture pour le web par le web" style="display:block; margin:0 auto;" title="Une architecture pour le web par le web" /></a></p> <p>Pour la restitution des données sur le tableau de bord, nous utilisons toute la puissance d'ElasticSearch et n'avons besoin que de deux requêtes HTTP:</p> <ol> <li>La première permet d’obtenir le game feed en récupérant les derniers évènements du jeu.</li> <li>La deuxième plus conséquente permettant de construire le reste du dashboard (graphiques, camemberts, classements et listes des joueurs et serveurs). Cette requête utilise les <a href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-facets.html" hreflang="en" title="Elasticsearch facets">facettes</a> ElasticSearch pour ramener différentes "vues" des mêmes données, tout ça en quelques millisecondes seulement. Cela permet notamment de minimiser le besoin de calcul côté client.</li> </ol> <h4>Merci!</h4> <p>Merci au GDG Nantes pour ce DevFest 2013 qui a présenté de nombreuses conférences de très bonnes qualités.</p> <p>Mais aussi merci à toutes les personnes qui sont passés sur le stand pour voir, échanger et jouer à zPilot. Nous avons ainsi pu collecter 34041 documents (évènements) sur la journée durant lesquelles plus de 800 personnes ont été froidement assassinées alors que 1400 mourraient dans l’anonymat&nbsp;!</p> <p>Enfin, félicitations aux speakers de Zenika pour leurs talks <a href="http://devfest.gdgnantes.com/index.html#/sessions?sessionId=14" hreflang="fr" title="Go &amp; AppEngine by Julien Landuré">Go &amp; AppEngine</a> (Julien Landuré) et <a href="http://devfest.gdgnantes.com/index.html#/sessions?sessionId=21" hreflang="fr" title="De l&#039;agilité pour mon projet: pour quoi faire ?">“De l’agilité pour mon projet&nbsp;: pour quoi faire?”</a> (Christophe Addinquy et Martin Mouterde).</p> <p>A l'année prochaine&nbsp;!</p> <p><img src="/wp-content/uploads/2015/07/.IMG_20131108_142749_m.jpg" alt="L&#039;équipe Zenika" style="display:block; margin:0 auto;" title="L&#039;équipe Zenika" /></p>