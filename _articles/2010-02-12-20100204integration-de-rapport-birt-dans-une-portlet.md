---
ID: 209
post_title: >
  Intégration de rapport BIRT dans une
  portlet
author: mcalinghee
post_date: 2010-02-12 16:45:00
post_excerpt: |
  <p>De nos jours, nous voyons de plus en plus d'applications riches sur le web et/ou autres portails webs nous permettant d'accéder rapidement à de l'information. Les besoins peuvent être divers et variés d'un domaine à un autre&nbsp;: par exemple, on pourrait imaginer dans un portail afficher la liste des soldes de chaque compte pour un directeur de banque ou bien on pourrait avoir un portail présentant la liste des achats effectués pour chaque magasin pour le PDG d'une compagnie de la grande distribution.<br />
  Ces exemples n'ont pas été choisis au hasard, ce sont des exemples spécifiques au domaine du Reporting. BIRT étant une de ces solutions les plus en vogue en ce moment, il serait intéressant de voir l'utilisation d'une telle technologie aux profits des portails webs constitués de portlets.<br /></p>
layout: post
permalink: http://blog.zenika-offres.com/?p=209
published: true
---
<p>De nos jours, nous voyons de plus en plus d'applications riches sur le web et/ou autres portails webs nous permettant d'accéder rapidement à de l'information. Les besoins peuvent être divers et variés d'un domaine à un autre&nbsp;: par exemple, on pourrait imaginer dans un portail afficher la liste des soldes de chaque compte pour un directeur de banque ou bien on pourrait avoir un portail présentant la liste des achats effectués pour chaque magasin pour le PDG d'une compagnie de la grande distribution.<br />
Ces exemples n'ont pas été choisis au hasard, ce sont des exemples spécifiques au domaine du Reporting. BIRT étant une de ces solutions les plus en vogue en ce moment, il serait intéressant de voir l'utilisation d'une telle technologie aux profits des portails webs constitués de portlets.<br /></p>
<!--more-->
<h2>1. Solutions d'intégrations aux portlets&nbsp;:</h2> <p>Jusqu'à présent, il existe deux solutions pour intégrer BIRT au sein de portlets&nbsp;: <br />
- l'intégration par IFrame/TagLib<br />
- l'intégration embarquée dans une portlet<br />
La première solution est l'intégration la plus simple et la plus facile à mettre en place, c'est ce que nous allons voir dans ce billet.</p> <h2>2. Installation du BIRT Web Viewer</h2> <p>Le BIRT Web Viewer est un composant permettant de visualiser les rapports BIRT dans les formats (PDF, HTML, DOC, etc.). Nous pouvons, entre autre, le retrouver dans le BIRT Designer quand on désire effectuer un rendu de rapport et apporte des fonctionnalités pour les utilisateurs finaux telles que la pagination, l'export du rapport vers d'autres rendus, l'export des données (au format CSV), la navigation dans le rapport avec la Table des Matières et un écran de saisie des paramètres (si cela est nécessaire).<br />
Ce composant est disponible sous forme de war afin de faciliter le déploiement vers un serveur ou sous forme "éclaté" si nous avons besoin de le customiser et de l'intégrer dans une application web.<br />
Nous pouvons obtenir le Web Viewer en téléchargeant la <a href="http://www.eclipse.org/downloads/download.php?file=/birt/downloads/drops/R-R1-2_5_1-200909220630/birt-runtime-2_5_1.zip">BIRT Runtime</a> sur le site d'Eclipse.<br />
<br />
Une fois téléchargé, nous allons installer le Web Viewer sur un serveur d'application en déployant le birt.war situé dans la BIRT Runtime.<br /></p> <h2>3. Intégration par IFrame&nbsp;:</h2> <p>La solution d'intégration la plus simple pour intégrer du BIRT est une intégration par IFrame. Quelque soit l'application web, il est très facile d'intégrer des rendus de rapports au sein de notre application, du moment que nous avons une page HTML (ou une JSP) et un BIRT Web Viewer d'installer sur un serveur d'application. <br />
Une fois le BIRT Web Viewer installé, la suite est un jeu d'enfant. Dans le code HTML qui va vous permettre de générer la vue de votre portlet(JSP,page HTML, Portlet), il suffit d'intégrer une IFrame pointant sur votre BIRT Viewer exécutant votre rapport BIRT.</p> <pre class="html code html" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">iframe</span> <span style="color: #000066;">src</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;http://localhost:8080/birt/frameset?__report=test.rptdesign&quot;</span> <span style="color: #000066;">height</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;600&quot;</span> <span style="color: #000066;">width</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;800&quot;</span>&gt;</span></div></li><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">iframe</span>&gt;</span></div></li></ol></pre> <p>L'une des spécificités du BIRT Viewer est qu'il est possible de l'exécuter par URL. L'URL à appeler se compose de la manière suivante&nbsp;: <code>http://[adresse_serveur]:[port]/[nom_birt_viewer_application]/frameset?__[param1]=[value1]</code>. Il suffit donc de passer dans l'URL le rapport à exécuter en tant que paramètre&nbsp;: <code>__report=test.rptdesign</code>.<br />
Note&nbsp;: le mot clé <strong>frameset</strong> permet de spécifier que l'on veut utiliser le web viewer.<br />
<br />
D'autre part, il est aussi possible d'utiliser la Taglib "birt.tld" pour une intégration plus adéquate dans les pages JSP. Vous pourrez trouver cette TagLib au chemin suivant&nbsp;: {BirtWebViewerApplication}/WebContent/WEB-INF/tlds<br />
L'utilisation de cette TagLib peut se faire de la manière suivante&nbsp;:</p> <pre class="html code html" style="font-family:inherit"><ol><li style="font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;"><span style="color: #009900;">&lt;birt:report <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;birtViewer&quot;</span> <span style="color: #000066;">height</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;600&quot;</span> <span style="color: #000066;">width</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;800&quot;</span> reportDesign<span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;test.rptdesign&quot;</span> <span style="color: #66cc66;">/</span>&gt;</span></div></li></ol></pre> <h2>4. Intégration embarquée&nbsp;:</h2> <p>Une autre idée serait d'embarquer directement une plateforme BIRT au sein d'une portlet. Cette procédure est décrite sur le <a href="http://wiki.eclipse.org/Portlet_Example_(BIRT)_2.1">Wiki d'Eclipse</a>, je vais donc me contenter de relayer cette information.<br />
Cependant, j'ai quelques commentaires à ajouter. Cette intégration complète et embarquée peut notamment servir pour une utilisation plus avancée de BIRT, ceci couplée à une utilisation des APIs BIRT, on pourrait imaginer des portlets puissantes en terme de reporting (exemple&nbsp;: paramétrage directement au niveau de la portlet pour ajouter des filtres, des tris ou la mise en surbrillance des données, etc)...<br />
A noter que, contrairement à l'intégration par IFrame, il n'y a pas besoin de faire d'installer au préalable du BIRT Web Viewer, étant donnée que nous embarquons la solution BIRT dans l'application Web contenant la portlet.</p>